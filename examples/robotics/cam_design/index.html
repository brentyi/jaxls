
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Cam profile optimization &#8212; jaxls</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=2a1f1aab" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=55b5f74b"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=fd10adb8"></script>
    <script src="../../../_static/js/custom.js?v=58150dd0"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/robotics/cam_design';</script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="IMU fusion + calibration" href="../imu_sensor_fusion/" />
    <link rel="prev" title="Cart-pole (shooting)" href="../cart_pole_shooting/" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
  
    <p class="title logo__title">jaxls</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../guide/basics/">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide/tips_and_gotchas/">Tips and gotchas</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../guide/advanced/">Advanced</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../guide/advanced/non_euclidean/">Non-Euclidean variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guide/advanced/custom_jacobians/">Custom Jacobians</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guide/advanced/constraints/">Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guide/advanced/robust_costs/">Robust costs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guide/advanced/covariance/">Covariance estimation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../mechanics/">Mechanics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mechanics/spring_equilibrium/">Spring equilibrium</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mechanics/cloth_draping/">Cloth draping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mechanics/truss_analysis/">Truss analysis</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../vision/">Vision</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../vision/camera_calibration/">Camera calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vision/pose_graph_2d/">SE(2) pose graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vision/pose_graph_3d/">SE(3) pose graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vision/bundle_adjustment/">Bundle adjustment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vision/smplh_shape_fitting/">SMPL-H shape fitting</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../">Robotics</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../inverse_kinematics/">Inverse kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../obstacle_avoidance/">Obstacle avoidance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cart_pole_collocation/">Cart-pole (collocation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cart_pole_shooting/">Cart-pole (shooting)</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Cam profile optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../imu_sensor_fusion/">IMU fusion + calibration</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../portfolio/">Portfolio optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../portfolio/mean_variance/">Mean-variance allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portfolio/manifold_allocation/">Manifold allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portfolio/reparameterized_allocation/">Reparameterized allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portfolio/cvar_optimization/">CVaR allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portfolio/black_litterman/">Black-Litterman allocation</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../api/core/">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/lie_group_variables/">Lie group variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/solver_config/">Solver configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/covariance/">Covariance Estimation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Design Notes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../design/typed_api/">Typed API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design/sparse_matrices/">Sparse matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design/traced_vs_static/">What’s traced?</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/brentyi/jaxls" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/brentyi/jaxls/issues/new?title=Issue%20on%20page%20%2Fexamples/robotics/cam_design.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/examples/robotics/cam_design.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Cam profile optimization</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cam-geometry">Cam geometry</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#target-motion-profile">Target motion profile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-variables-and-costs">Optimization variables and costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solve-the-cam-design-problem">Solve the cam design problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pressure-angle-analysis">Pressure angle analysis</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="cam-profile-optimization">
<h1>Cam profile optimization<a class="headerlink" href="#cam-profile-optimization" title="Link to this heading">#</a></h1>
<p>In this notebook, we solve a cam design problem: finding cam profiles that produce
smooth follower motion while satisfying curvature constraints.</p>
<p><strong>Inputs:</strong> Target dwell-rise-dwell-return displacement profile<br />
<strong>Outputs:</strong> B-spline control points defining the cam shape</p>
<p>Features used:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../api/core/#jaxls.Var" title="jaxls.Var"><code class="xref py py-class docutils literal notranslate"><span class="pre">Var</span></code></a> for B-spline control point radii</p></li>
<li><p><a class="reference internal" href="../../../api/core/#jaxls.Cost.factory" title="jaxls.Cost.factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;jaxls.Cost.factory</span></code></a> for motion tracking and smoothness</p></li>
<li><p>Inequality constraints for pressure angle and minimum radius limits</p></li>
</ul>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">loguru</span><span class="w"> </span><span class="kn">import</span> <span class="n">logger</span>

<span class="n">logger</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;&lt;level&gt;</span><span class="si">{level: &lt;8}</span><span class="s2">&lt;/level&gt; | </span><span class="si">{message}</span><span class="s2">&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">jax</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jax.numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">jnp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">jaxls</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<section id="cam-geometry">
<h2>Cam geometry<a class="headerlink" href="#cam-geometry" title="Link to this heading">#</a></h2>
<p>We model a radial plate cam with a translating knife-edge follower. The cam profile is defined by radii <span class="math notranslate nohighlight">\(r(\theta)\)</span> at discrete angles. The follower displacement equals <span class="math notranslate nohighlight">\(r(\theta) - r_{base}\)</span> where <span class="math notranslate nohighlight">\(r_{base}\)</span> is the base circle radius.</p>
<p>The <strong>pressure angle</strong> <span class="math notranslate nohighlight">\(\alpha\)</span> is the angle between the follower motion direction and the normal to the cam surface. Large pressure angles cause high side loads on the follower guide:</p>
<div class="math notranslate nohighlight">
\[\tan(\alpha) = \frac{dr/d\theta}{r}\]</div>
<p>We use a B-spline parameterization for smooth, manufacturable cam profiles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">cubic_bspline_basis</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">n_ctrl</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate cubic B-spline basis function i at parameter t.</span>

<span class="sd">    Uses uniform periodic knots for a closed curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Map t to [0, n] with wrapping</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">n_ctrl</span>

    <span class="c1"># Local parameter within the basis function support</span>
    <span class="n">local_u</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="n">n_ctrl</span>

    <span class="c1"># Cubic B-spline basis (Cox-de Boor for uniform knots)</span>
    <span class="c1"># Only non-zero in [0, 4)</span>
    <span class="n">basis</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">local_u</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">local_u</span><span class="o">**</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
            <span class="n">local_u</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">,</span>
            <span class="p">(</span><span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="o">/</span> <span class="mi">6</span><span class="p">,</span>
            <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">local_u</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">,</span>
                <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">/</span> <span class="mi">6</span><span class="p">,</span>
                <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">local_u</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">local_u</span> <span class="o">-</span> <span class="mi">3</span><span class="p">))</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">basis</span>


<span class="nd">@jax</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span><span class="w"> </span><span class="nf">eval_cam_radius</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate cam radius at angle theta using B-spline interpolation.</span>

<span class="sd">    Args:</span>
<span class="sd">        ctrl_points: B-spline control point radii (n_ctrl,)</span>
<span class="sd">        theta: Cam angle in [0, 2*pi]</span>

<span class="sd">    Returns:</span>
<span class="sd">        Cam radius at theta</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_ctrl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">theta</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># Normalize to [0, 1]</span>

    <span class="c1"># Sum basis functions weighted by control points</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="n">ctrl_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">cubic_bspline_basis</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">n_ctrl</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_ctrl</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">radius</span>


<span class="k">def</span><span class="w"> </span><span class="nf">cam_profile_xy</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">n_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate cam profile as (x, y) points.</span>

<span class="sd">    Args:</span>
<span class="sd">        ctrl_points: B-spline control point radii</span>
<span class="sd">        n_points: Number of points around the profile</span>

<span class="sd">    Returns:</span>
<span class="sd">        (n_points, 2) array of (x, y) coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">thetas</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">n_points</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">radii</span> <span class="o">=</span> <span class="n">jax</span><span class="o">.</span><span class="n">vmap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">eval_cam_radius</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">,</span> <span class="n">th</span><span class="p">))(</span><span class="n">thetas</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">radii</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">thetas</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">radii</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">thetas</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jnp</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>


<span class="nd">@jax</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compute_pressure_angle</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute pressure angle at given cam angle.</span>

<span class="sd">    The pressure angle is arctan(dr/dtheta / r).</span>

<span class="sd">    Args:</span>
<span class="sd">        ctrl_points: B-spline control point radii</span>
<span class="sd">        theta: Cam angle</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pressure angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">eval_cam_radius</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
    <span class="n">dr_dtheta</span> <span class="o">=</span> <span class="n">jax</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">eval_cam_radius</span><span class="p">(</span><span class="n">ctrl_points</span><span class="p">,</span> <span class="n">th</span><span class="p">))(</span><span class="n">theta</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jnp</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">dr_dtheta</span><span class="p">),</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="target-motion-profile">
<h2>Target motion profile<a class="headerlink" href="#target-motion-profile" title="Link to this heading">#</a></h2>
<p>We design a cam for a dwell-rise-dwell-return motion:</p>
<ul class="simple">
<li><p><strong>Dwell</strong> at low position (0-90°)</p></li>
<li><p><strong>Rise</strong> to high position (90-180°)</p></li>
<li><p><strong>Dwell</strong> at high position (180-270°)</p></li>
<li><p><strong>Return</strong> to low position (270-360°)</p></li>
</ul>
<p>We use a modified sine (cycloidal) motion for smooth acceleration.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">cycloidal_rise</span><span class="p">(</span><span class="n">beta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cycloidal rise motion: smooth acceleration profile.</span>

<span class="sd">    Args:</span>
<span class="sd">        beta: Normalized angle [0, 1].</span>

<span class="sd">    Returns:</span>
<span class="sd">        Displacement [0, 1].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">beta</span> <span class="o">-</span> <span class="n">jnp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">beta</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">target_displacement</span><span class="p">(</span><span class="n">theta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">lift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Target follower displacement for dwell-rise-dwell-return motion.</span>

<span class="sd">    Args:</span>
<span class="sd">        theta: Cam angle in radians.</span>
<span class="sd">        lift: Total follower lift.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Target displacement from base position.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">theta_deg</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>

    <span class="c1"># Dwell at low (0-90).</span>
    <span class="n">low_dwell</span> <span class="o">=</span> <span class="n">theta_deg</span> <span class="o">&lt;</span> <span class="mi">90</span>

    <span class="c1"># Rise (90-180).</span>
    <span class="n">rise</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">&gt;=</span> <span class="mi">90</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">&lt;</span> <span class="mi">180</span><span class="p">)</span>
    <span class="n">rise_beta</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">-</span> <span class="mi">90</span><span class="p">)</span> <span class="o">/</span> <span class="mi">90</span>

    <span class="c1"># Dwell at high (180-270).</span>
    <span class="n">high_dwell</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">&gt;=</span> <span class="mi">180</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">&lt;</span> <span class="mi">270</span><span class="p">)</span>

    <span class="c1"># Return (270-360).</span>
    <span class="n">ret_beta</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_deg</span> <span class="o">-</span> <span class="mi">270</span><span class="p">)</span> <span class="o">/</span> <span class="mi">90</span>

    <span class="n">displacement</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">low_dwell</span><span class="p">,</span>
        <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
            <span class="n">rise</span><span class="p">,</span>
            <span class="n">lift</span> <span class="o">*</span> <span class="n">cycloidal_rise</span><span class="p">(</span><span class="n">rise_beta</span><span class="p">),</span>
            <span class="n">jnp</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">high_dwell</span><span class="p">,</span> <span class="n">lift</span><span class="p">,</span> <span class="n">lift</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">cycloidal_rise</span><span class="p">(</span><span class="n">ret_beta</span><span class="p">))),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">displacement</span>


<span class="c1"># Base circle radius.</span>
<span class="n">R_BASE</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">LIFT</span> <span class="o">=</span> <span class="mf">0.3</span>

<span class="c1"># Generate target profile.</span>
<span class="n">n_sample</span> <span class="o">=</span> <span class="mi">72</span>
<span class="n">sample_thetas</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">target_radii</span> <span class="o">=</span> <span class="n">R_BASE</span> <span class="o">+</span> <span class="n">jax</span><span class="o">.</span><span class="n">vmap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">target_displacement</span><span class="p">(</span><span class="n">th</span><span class="p">,</span> <span class="n">LIFT</span><span class="p">))(</span>
    <span class="n">sample_thetas</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Target motion: dwell-rise-dwell-return&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Base radius: </span><span class="si">{</span><span class="n">R_BASE</span><span class="si">}</span><span class="s2">, Lift: </span><span class="si">{</span><span class="n">LIFT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling </span><span class="si">{</span><span class="n">n_sample</span><span class="si">}</span><span class="s2"> points around the cam&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Target motion: dwell-rise-dwell-return
Base radius: 1.0, Lift: 0.3
Sampling 72 points around the cam
</pre></div>
</div>
</div>
</div>
</section>
<section id="optimization-variables-and-costs">
<h2>Optimization variables and costs<a class="headerlink" href="#optimization-variables-and-costs" title="Link to this heading">#</a></h2>
<p>We optimize B-spline control points to match the target motion while satisfying constraints.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Number of B-spline control points.</span>
<span class="n">N_CTRL</span> <span class="o">=</span> <span class="mi">16</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CamControlPointsVar</span><span class="p">(</span>
    <span class="n">jaxls</span><span class="o">.</span><span class="n">Var</span><span class="p">[</span><span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">],</span>
    <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">jnp</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N_CTRL</span><span class="p">)</span> <span class="o">*</span> <span class="n">R_BASE</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;B-spline control point radii for cam profile.&quot;&quot;&quot;</span>


<span class="n">cam_var</span> <span class="o">=</span> <span class="n">CamControlPointsVar</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@jaxls</span><span class="o">.</span><span class="n">Cost</span><span class="o">.</span><span class="n">factory</span>
<span class="k">def</span><span class="w"> </span><span class="nf">motion_tracking_cost</span><span class="p">(</span>
    <span class="n">vals</span><span class="p">:</span> <span class="n">jaxls</span><span class="o">.</span><span class="n">VarValues</span><span class="p">,</span>
    <span class="n">var</span><span class="p">:</span> <span class="n">CamControlPointsVar</span><span class="p">,</span>
    <span class="n">theta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span>
    <span class="n">target_r</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cost for cam radius to match target displacement.&quot;&quot;&quot;</span>
    <span class="n">ctrl_pts</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
    <span class="n">actual_r</span> <span class="o">=</span> <span class="n">eval_cam_radius</span><span class="p">(</span><span class="n">ctrl_pts</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
    <span class="c1"># Weight the error by 10 to prioritize motion tracking.</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">actual_r</span> <span class="o">-</span> <span class="n">target_r</span><span class="p">)</span> <span class="o">*</span> <span class="mf">10.0</span>


<span class="nd">@jaxls</span><span class="o">.</span><span class="n">Cost</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;constraint_leq_zero&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">min_radius_constraint</span><span class="p">(</span>
    <span class="n">vals</span><span class="p">:</span> <span class="n">jaxls</span><span class="o">.</span><span class="n">VarValues</span><span class="p">,</span>
    <span class="n">var</span><span class="p">:</span> <span class="n">CamControlPointsVar</span><span class="p">,</span>
    <span class="n">min_radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;All control points must be &gt;= minimum radius.&quot;&quot;&quot;</span>
    <span class="n">ctrl_pts</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">min_radius</span> <span class="o">-</span> <span class="n">ctrl_pts</span>


<span class="nd">@jaxls</span><span class="o">.</span><span class="n">Cost</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;constraint_leq_zero&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pressure_angle_constraint</span><span class="p">(</span>
    <span class="n">vals</span><span class="p">:</span> <span class="n">jaxls</span><span class="o">.</span><span class="n">VarValues</span><span class="p">,</span>
    <span class="n">var</span><span class="p">:</span> <span class="n">CamControlPointsVar</span><span class="p">,</span>
    <span class="n">theta</span><span class="p">:</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span>
    <span class="n">max_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pressure angle must be &lt;= maximum allowed.&quot;&quot;&quot;</span>
    <span class="n">ctrl_pts</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">compute_pressure_angle</span><span class="p">(</span><span class="n">ctrl_pts</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jnp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">alpha</span> <span class="o">-</span> <span class="n">max_angle</span><span class="p">])</span>


<span class="nd">@jaxls</span><span class="o">.</span><span class="n">Cost</span><span class="o">.</span><span class="n">factory</span>
<span class="k">def</span><span class="w"> </span><span class="nf">smoothness_cost</span><span class="p">(</span>
    <span class="n">vals</span><span class="p">:</span> <span class="n">jaxls</span><span class="o">.</span><span class="n">VarValues</span><span class="p">,</span>
    <span class="n">var</span><span class="p">:</span> <span class="n">CamControlPointsVar</span><span class="p">,</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">n_ctrl</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jax</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Penalize second differences for smooth profile.&quot;&quot;&quot;</span>
    <span class="n">ctrl_pts</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
    <span class="c1"># Second difference (discrete curvature)</span>
    <span class="n">prev_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n_ctrl</span>
    <span class="n">next_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n_ctrl</span>
    <span class="n">curvature</span> <span class="o">=</span> <span class="n">ctrl_pts</span><span class="p">[</span><span class="n">prev_idx</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ctrl_pts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="n">ctrl_pts</span><span class="p">[</span><span class="n">next_idx</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">jnp</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">curvature</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="solve-the-cam-design-problem">
<h2>Solve the cam design problem<a class="headerlink" href="#solve-the-cam-design-problem" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Maximum allowed pressure angle (30 degrees is typical limit).</span>
<span class="n">MAX_PRESSURE_ANGLE</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">MIN_RADIUS</span> <span class="o">=</span> <span class="mf">0.7</span>

<span class="c1"># Build costs.</span>
<span class="c1"># Note: loops used for clarity; batched construction is more efficient.</span>
<span class="n">costs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">jaxls</span><span class="o">.</span><span class="n">Cost</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Motion tracking at sample points.</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_sample</span><span class="p">):</span>
    <span class="n">costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">motion_tracking_cost</span><span class="p">(</span><span class="n">cam_var</span><span class="p">,</span> <span class="n">sample_thetas</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">target_radii</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

<span class="c1"># Minimum radius constraint.</span>
<span class="n">costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_radius_constraint</span><span class="p">(</span><span class="n">cam_var</span><span class="p">,</span> <span class="n">MIN_RADIUS</span><span class="p">))</span>

<span class="c1"># Pressure angle constraints at key points (during rise and return phases).</span>
<span class="n">pressure_check_angles</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="n">jnp</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">95</span><span class="p">),</span> <span class="n">jnp</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">175</span><span class="p">),</span> <span class="mi">8</span>
<span class="p">)</span>  <span class="c1"># Rise phase.</span>
<span class="n">pressure_check_angles</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
    <span class="p">[</span><span class="n">pressure_check_angles</span><span class="p">,</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">275</span><span class="p">),</span> <span class="n">jnp</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="mi">355</span><span class="p">),</span> <span class="mi">8</span><span class="p">)]</span>
<span class="p">)</span>  <span class="c1"># Return phase.</span>

<span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="n">pressure_check_angles</span><span class="p">:</span>
    <span class="n">costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pressure_angle_constraint</span><span class="p">(</span><span class="n">cam_var</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">MAX_PRESSURE_ANGLE</span><span class="p">))</span>

<span class="c1"># Smoothness regularization.</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_CTRL</span><span class="p">):</span>
    <span class="n">costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smoothness_cost</span><span class="p">(</span><span class="n">cam_var</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">N_CTRL</span><span class="p">))</span>

<span class="c1"># Initial guess: sample target radii at control point angles.</span>
<span class="n">ctrl_indices</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">,</span> <span class="n">N_CTRL</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">initial_ctrl</span> <span class="o">=</span> <span class="n">target_radii</span><span class="p">[</span><span class="n">ctrl_indices</span><span class="p">]</span>

<span class="c1"># Create the problem.</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">jaxls</span><span class="o">.</span><span class="n">LeastSquaresProblem</span><span class="p">(</span><span class="n">costs</span><span class="p">,</span> <span class="p">[</span><span class="n">cam_var</span><span class="p">])</span>

<span class="c1"># Visualize the problem structure structure.</span>
<span class="n">problem</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="100%"
            height="500"
            src="data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsgbWFyZ2luOiAwOyBvdmVyZmxvdzogaGlkZGVuOyB9CiAgICAgICAgI2NvbnRhaW5lciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMHZoOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KICAgICAgICBjYW52YXMgeyBkaXNwbGF5OiBibG9jazsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgfQogICAgICAgIC5zdGF0dXMgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogNXB4OyByaWdodDogMTBweDsgZm9udC1zaXplOiAxMHB4OyBjb2xvcjogIzY2NjsgZm9udC1mYW1pbHk6IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsgcGFkZGluZzogMnB4IDVweDsgYm9yZGVyLXJhZGl1czogM3B4OyB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8Y2FudmFzPjwvY2FudmFzPgogICAgICAgIDxkaXYgY2xhc3M9InN0YXR1cyI+MTA1IGNvc3RzLCAxIHZhcmlhYmxlczwvZGl2PgogICAgPC9kaXY+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9kM2pzLm9yZy9kMy52Ny5taW4uanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgIChmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBkYXRhID0geyJub2RlcyI6IFt7ImlkIjogInZhcl8wIiwgImxhYmVsIjogIkNhbUNvbnRyb2xQb2ludHNWYXIoMCkiLCAidHlwZSI6ICJ2YXJpYWJsZSIsICJ2YXJfdHlwZSI6ICJDYW1Db250cm9sUG9pbnRzVmFyIiwgImZpbGwiOiAiI2ZmY2NjYyIsICJzdHJva2UiOiAiI2NjNjY2NiJ9LCB7ImlkIjogImNvc3RfMCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMTAiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzExIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMTMiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzE0IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xNSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMTYiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzE3IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xOCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMTkiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzIwIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8yMSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMjIiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzIzIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8yNCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMjUiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzI2IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8yNyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMjgiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzI5IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8zMCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMzEiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzMyIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8zMyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMzQiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzM1IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8zNiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfMzciLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzM4IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8zOSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNDAiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzQxIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF80MiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNDMiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzQ0IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF80NSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNDYiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzQ3IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF80OCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNDkiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzUwIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF81MSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNTIiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzUzIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF81NCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNTUiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzU2IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF81NyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNTgiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzU5IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF82MCIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNjEiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzYyIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF82MyIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNjQiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzY1IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF82NiIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNjciLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzY4IiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF82OSIsICJsYWJlbCI6ICJtb3Rpb25fdHJhY2tpbmdfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfNzAiLCAibGFiZWwiOiAibW90aW9uX3RyYWNraW5nX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzcxIiwgImxhYmVsIjogIm1vdGlvbl90cmFja2luZ19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF83MiIsICJsYWJlbCI6ICJtaW5fcmFkaXVzX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0XzczIiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc0IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc1IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc2IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc3IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc4IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzc5IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0XzgwIiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0XzgxIiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0XzgyIiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0XzgzIiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg0IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg1IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg2IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg3IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg4IiwgImxhYmVsIjogInByZXNzdXJlX2FuZ2xlX2NvbnN0cmFpbnQiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAiY29uc3RyYWludF9sZXFfemVybyIsICJmaWxsIjogIiNmZmU0YTgiLCAic3Ryb2tlIjogIiNkOWE4NGEifSwgeyJpZCI6ICJjb3N0Xzg5IiwgImxhYmVsIjogInNtb290aG5lc3NfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOTAiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF85MSIsICJsYWJlbCI6ICJzbW9vdGhuZXNzX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0XzkyIiwgImxhYmVsIjogInNtb290aG5lc3NfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOTMiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF85NCIsICJsYWJlbCI6ICJzbW9vdGhuZXNzX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0Xzk1IiwgImxhYmVsIjogInNtb290aG5lc3NfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOTYiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF85NyIsICJsYWJlbCI6ICJzbW9vdGhuZXNzX2Nvc3QiLCAidHlwZSI6ICJjb3N0IiwgImtpbmQiOiAibDJfc3F1YXJlZCIsICJmaWxsIjogIiNhOGQ1ZmYiLCAic3Ryb2tlIjogIiM0YTkwZDkifSwgeyJpZCI6ICJjb3N0Xzk4IiwgImxhYmVsIjogInNtb290aG5lc3NfY29zdCIsICJ0eXBlIjogImNvc3QiLCAia2luZCI6ICJsMl9zcXVhcmVkIiwgImZpbGwiOiAiI2E4ZDVmZiIsICJzdHJva2UiOiAiIzRhOTBkOSJ9LCB7ImlkIjogImNvc3RfOTkiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMDAiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMDEiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMDIiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMDMiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In0sIHsiaWQiOiAiY29zdF8xMDQiLCAibGFiZWwiOiAic21vb3RobmVzc19jb3N0IiwgInR5cGUiOiAiY29zdCIsICJraW5kIjogImwyX3NxdWFyZWQiLCAiZmlsbCI6ICIjYThkNWZmIiwgInN0cm9rZSI6ICIjNGE5MGQ5In1dLCAibGlua3MiOiBbeyJzb3VyY2UiOiAiY29zdF8wIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEiLCAidGFyZ2V0IjogInZhcl8wIn0sIHsic291cmNlIjogImNvc3RfMiIsICJ0YXJnZXQiOiAidmFyXzAifSwgeyJzb3VyY2UiOiAiY29zdF8zIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQiLCAidGFyZ2V0IjogInZhcl8wIn0sIHsic291cmNlIjogImNvc3RfNSIsICJ0YXJnZXQiOiAidmFyXzAifSwgeyJzb3VyY2UiOiAiY29zdF82IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzciLCAidGFyZ2V0IjogInZhcl8wIn0sIHsic291cmNlIjogImNvc3RfOCIsICJ0YXJnZXQiOiAidmFyXzAifSwgeyJzb3VyY2UiOiAiY29zdF85IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzExIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzE5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzIwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzIxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzIyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzIzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzI5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzMwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzMxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzMyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzMzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzM5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzQ5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzUwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzUxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzUyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzUzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzU5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzYwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzYxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzYyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzYzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzY5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzcwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzcxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzcyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzczIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzc5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzgwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzgxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzgyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzgzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzg5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzkwIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzkxIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzkyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzkzIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk0IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk1IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk2IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk3IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk4IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0Xzk5IiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEwMCIsICJ0YXJnZXQiOiAidmFyXzAifSwgeyJzb3VyY2UiOiAiY29zdF8xMDEiLCAidGFyZ2V0IjogInZhcl8wIn0sIHsic291cmNlIjogImNvc3RfMTAyIiwgInRhcmdldCI6ICJ2YXJfMCJ9LCB7InNvdXJjZSI6ICJjb3N0XzEwMyIsICJ0YXJnZXQiOiAidmFyXzAifSwgeyJzb3VyY2UiOiAiY29zdF8xMDQiLCAidGFyZ2V0IjogInZhcl8wIn1dLCAidHJ1bmNhdGVkIjogZmFsc2V9OwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGQzLnNlbGVjdCgiI2NvbnRhaW5lciIpOwogICAgICAgIGNvbnN0IGNhbnZhcyA9IGNvbnRhaW5lci5zZWxlY3QoImNhbnZhcyIpLm5vZGUoKTsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAvLyBHZXQgYWN0dWFsIGNvbnRhaW5lciBkaW1lbnNpb25zLgogICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjb25zdCB3aWR0aCA9IHJlY3Qud2lkdGg7CiAgICBjb25zdCBoZWlnaHQgPSByZWN0LmhlaWdodDsKCiAgICAvLyBOb2RlIHNpemluZy4KICAgIGNvbnN0IHZhclJ4ID0gNDUsIHZhclJ5ID0gMTQ7ICAvLyBFbGxpcHNlIHJhZGlpIGZvciB2YXJpYWJsZXMuCiAgICBjb25zdCBjb3N0VyA9IDkwLCBjb3N0SCA9IDIyOyAgIC8vIFJlY3Qgc2l6ZSBmb3IgY29zdHMuCgogICAgLy8gU2V0IHVwIGhpZ2gtRFBJIGNhbnZhcy4KICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7CiAgICBjYW52YXMud2lkdGggPSB3aWR0aCAqIGRwcjsKICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQgKiBkcHI7CiAgICBjdHguc2NhbGUoZHByLCBkcHIpOwoKICAgIC8vIFRyYWNrIHRyYW5zZm9ybSBmb3Igem9vbS9wYW4uCiAgICBsZXQgdHJhbnNmb3JtID0gZDMuem9vbUlkZW50aXR5OwoKICAgIC8vIENyZWF0ZSBmb3JjZSBzaW11bGF0aW9uLgogICAgY29uc3Qgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbihkYXRhLm5vZGVzKQogICAgICAgIC5mb3JjZSgibGluayIsIGQzLmZvcmNlTGluayhkYXRhLmxpbmtzKS5pZChkID0+IGQuaWQpLmRpc3RhbmNlKDYwKSkKICAgICAgICAuZm9yY2UoImNoYXJnZSIsIGQzLmZvcmNlTWFueUJvZHkoKS5zdHJlbmd0aCgtMTUwKS5kaXN0YW5jZU1heCgyNTApKQogICAgICAgIC5mb3JjZSgiY2VudGVyIiwgZDMuZm9yY2VDZW50ZXIod2lkdGggLyAyLCBoZWlnaHQgLyAyKSkKICAgICAgICAuZm9yY2UoImNvbGxpc2lvbiIsIGQzLmZvcmNlQ29sbGlkZSgpLnJhZGl1cygzNSkpOwoKICAgIC8vIERyYWcgc3RhdGUuCiAgICBsZXQgZHJhZ05vZGUgPSBudWxsOwoKICAgIC8vIEZpbmQgbm9kZSBhdCBwb3NpdGlvbi4KICAgIGZ1bmN0aW9uIG5vZGVBdCh4LCB5KSB7CiAgICAgICAgY29uc3QgdHggPSAoeCAtIHRyYW5zZm9ybS54KSAvIHRyYW5zZm9ybS5rOwogICAgICAgIGNvbnN0IHR5ID0gKHkgLSB0cmFuc2Zvcm0ueSkgLyB0cmFuc2Zvcm0uazsKICAgICAgICBmb3IgKGxldCBpID0gZGF0YS5ub2Rlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICBjb25zdCBkID0gZGF0YS5ub2Rlc1tpXTsKICAgICAgICAgICAgY29uc3QgZHggPSB0eCAtIGQueDsKICAgICAgICAgICAgY29uc3QgZHkgPSB0eSAtIGQueTsKICAgICAgICAgICAgaWYgKGQudHlwZSA9PT0gInZhcmlhYmxlIikgewogICAgICAgICAgICAgICAgaWYgKChkeCpkeCkvKHZhclJ4KnZhclJ4KSArIChkeSpkeSkvKHZhclJ5KnZhclJ5KSA8IDEpIHJldHVybiBkOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGR4KSA8IGNvc3RXLzIgJiYgTWF0aC5hYnMoZHkpIDwgY29zdEgvMikgcmV0dXJuIGQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gZHJhdygpIHsKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgY3R4LnRyYW5zbGF0ZSh0cmFuc2Zvcm0ueCwgdHJhbnNmb3JtLnkpOwogICAgICAgIGN0eC5zY2FsZSh0cmFuc2Zvcm0uaywgdHJhbnNmb3JtLmspOwoKICAgICAgICAvLyBEcmF3IGxpbmtzLgogICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICIjOTk5IjsKICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjY7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEuNSAvIHRyYW5zZm9ybS5rOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBkYXRhLmxpbmtzLmZvckVhY2goZCA9PiB7CiAgICAgICAgICAgIGN0eC5tb3ZlVG8oZC5zb3VyY2UueCwgZC5zb3VyY2UueSk7CiAgICAgICAgICAgIGN0eC5saW5lVG8oZC50YXJnZXQueCwgZC50YXJnZXQueSk7CiAgICAgICAgfSk7CiAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDsKCiAgICAgICAgLy8gRHJhdyBub2Rlcy4KICAgICAgICBkYXRhLm5vZGVzLmZvckVhY2goZCA9PiB7CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoZC54LCBkLnkpOwoKICAgICAgICAgICAgaWYgKGQudHlwZSA9PT0gInZhcmlhYmxlIikgewogICAgICAgICAgICAgICAgLy8gRWxsaXBzZSBmb3IgdmFyaWFibGVzLgogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmVsbGlwc2UoMCwgMCwgdmFyUngsIHZhclJ5LCAwLCAwLCAyICogTWF0aC5QSSk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZC5maWxsOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGQuc3Ryb2tlOwogICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEuNSAvIHRyYW5zZm9ybS5rOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gUm91bmRlZCByZWN0IGZvciBjb3N0cy4KICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBjb3N0VywgaCA9IGNvc3RILCByID0gNDsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oLXcvMiArIHIsIC1oLzIpOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh3LzIgLSByLCAtaC8yKTsKICAgICAgICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHcvMiwgLWgvMiwgdy8yLCAtaC8yICsgcik7CiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHcvMiwgaC8yIC0gcik7CiAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh3LzIsIGgvMiwgdy8yIC0gciwgaC8yKTsKICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oLXcvMiArIHIsIGgvMik7CiAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygtdy8yLCBoLzIsIC13LzIsIGgvMiAtIHIpOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbygtdy8yLCAtaC8yICsgcik7CiAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygtdy8yLCAtaC8yLCAtdy8yICsgciwgLWgvMik7CiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZC5maWxsOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGQuc3Ryb2tlOwogICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEuNSAvIHRyYW5zZm9ybS5rOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEcmF3IGxhYmVsLgogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOwogICAgICAgICAgICBjdHguZm9udCA9ICI5cHggSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiI7CiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICJtaWRkbGUiOwogICAgICAgICAgICBjdHguZmlsbFRleHQoZC5sYWJlbCwgMCwgMCk7CgogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBEcmF3IGxlZ2VuZC4KICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIGRyYXdMZWdlbmQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmF3TGVnZW5kKCkgewogICAgICAgIC8vIEJ1aWxkIGxlZ2VuZCBkeW5hbWljYWxseSBmcm9tIGFjdHVhbCBub2Rlcy4KICAgICAgICBjb25zdCBsZWdlbmREYXRhID0gW107CgogICAgICAgIC8vIENvbGxlY3QgdW5pcXVlIGNvc3Qga2luZHMuCiAgICAgICAgY29uc3QgY29zdEtpbmRMYWJlbHMgPSB7CiAgICAgICAgICAgICJsMl9zcXVhcmVkIjogIkNvc3QgKEwyKSIsCiAgICAgICAgICAgICJjb25zdHJhaW50X2VxX3plcm8iOiAiRXF1YWxpdHkiLAogICAgICAgICAgICAiY29uc3RyYWludF9sZXFfemVybyI6ICJJbmVxdWFsaXR5ICjiiaQpIiwKICAgICAgICAgICAgImNvbnN0cmFpbnRfZ2VxX3plcm8iOiAiSW5lcXVhbGl0eSAo4omlKSIKICAgICAgICB9OwogICAgICAgIGNvbnN0IHNlZW5Db3N0S2luZHMgPSBuZXcgU2V0KCk7CiAgICAgICAgZGF0YS5ub2Rlcy5maWx0ZXIobiA9PiBuLnR5cGUgPT09ICJjb3N0IikuZm9yRWFjaChuID0+IHNlZW5Db3N0S2luZHMuYWRkKG4ua2luZCkpOwogICAgICAgIGZvciAoY29uc3Qga2luZCBvZiBbImwyX3NxdWFyZWQiLCAiY29uc3RyYWludF9lcV96ZXJvIiwgImNvbnN0cmFpbnRfbGVxX3plcm8iLCAiY29uc3RyYWludF9nZXFfemVybyJdKSB7CiAgICAgICAgICAgIGlmIChzZWVuQ29zdEtpbmRzLmhhcyhraW5kKSkgewogICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGRhdGEubm9kZXMuZmluZChuID0+IG4udHlwZSA9PT0gImNvc3QiICYmIG4ua2luZCA9PT0ga2luZCk7CiAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjb3N0S2luZExhYmVsc1traW5kXSwKICAgICAgICAgICAgICAgICAgICBmaWxsOiBub2RlLmZpbGwsCiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBub2RlLnN0cm9rZSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29zdCIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBDb2xsZWN0IHVuaXF1ZSB2YXJpYWJsZSB0eXBlcy4KICAgICAgICBjb25zdCBzZWVuVmFyVHlwZXMgPSBuZXcgTWFwKCk7ICAvLyB2YXJfdHlwZSAtPiB7ZmlsbCwgc3Ryb2tlfQogICAgICAgIGRhdGEubm9kZXMuZmlsdGVyKG4gPT4gbi50eXBlID09PSAidmFyaWFibGUiKS5mb3JFYWNoKG4gPT4gewogICAgICAgICAgICBpZiAoIXNlZW5WYXJUeXBlcy5oYXMobi52YXJfdHlwZSkpIHsKICAgICAgICAgICAgICAgIHNlZW5WYXJUeXBlcy5zZXQobi52YXJfdHlwZSwgeyBmaWxsOiBuLmZpbGwsIHN0cm9rZTogbi5zdHJva2UgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBmb3IgKGNvbnN0IFt2YXJUeXBlLCBjb2xvcnNdIG9mIHNlZW5WYXJUeXBlcykgewogICAgICAgICAgICBsZWdlbmREYXRhLnB1c2goewogICAgICAgICAgICAgICAgbGFiZWw6IHZhclR5cGUsCiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvcnMuZmlsbCwKICAgICAgICAgICAgICAgIHN0cm9rZTogY29sb3JzLnN0cm9rZSwKICAgICAgICAgICAgICAgIHR5cGU6ICJ2YXJpYWJsZSIKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC50cmFuc2xhdGUoMTAsIDEwKTsKCiAgICAgICAgbGVnZW5kRGF0YS5mb3JFYWNoKChkLCBpKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHkgPSBpICogMTg7CiAgICAgICAgICAgIGlmIChkLnR5cGUgPT09ICJ2YXJpYWJsZSIpIHsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5lbGxpcHNlKDEyLCB5ICsgNiwgMTIsIDYsIDAsIDAsIDIgKiBNYXRoLlBJKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBkLmZpbGw7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gZC5zdHJva2U7CiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5yb3VuZFJlY3QoMCwgeSwgMjQsIDEyLCAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBkLmZpbGw7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gZC5zdHJva2U7CiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOwogICAgICAgICAgICBjdHguZm9udCA9ICI5cHggSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiI7CiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAibGVmdCI7CiAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAibWlkZGxlIjsKICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGQubGFiZWwsIDMwLCB5ICsgNik7CiAgICAgICAgfSk7CgogICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICB9CgogICAgc2ltdWxhdGlvbi5vbigidGljayIsIGRyYXcpOwoKICAgIC8vIFpvb20gYmVoYXZpb3Igd2l0aCBmaWx0ZXIgdG8gYWxsb3cgbm9kZSBkcmFnZ2luZy4KICAgIGNvbnN0IHpvb20gPSBkMy56b29tKCkKICAgICAgICAuc2NhbGVFeHRlbnQoWzAuMSwgNF0pCiAgICAgICAgLmZpbHRlcigoZXZlbnQpID0+IHsKICAgICAgICAgICAgLy8gQmxvY2sgem9vbSBpZiBjbGlja2luZyBvbiBhIG5vZGUgKGFsbG93IG5vZGUgZHJhZyBpbnN0ZWFkKS4KICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICJtb3VzZWRvd24iKSB7CiAgICAgICAgICAgICAgICBjb25zdCBbeCwgeV0gPSBkMy5wb2ludGVyKGV2ZW50KTsKICAgICAgICAgICAgICAgIGlmIChub2RlQXQoeCwgeSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KQogICAgICAgIC5vbigiem9vbSIsIChldmVudCkgPT4gewogICAgICAgICAgICB0cmFuc2Zvcm0gPSBldmVudC50cmFuc2Zvcm07CiAgICAgICAgICAgIGRyYXcoKTsKICAgICAgICB9KTsKCiAgICBkMy5zZWxlY3QoY2FudmFzKQogICAgICAgIC5jYWxsKHpvb20pCiAgICAgICAgLm9uKCJtb3VzZWRvd24uZHJhZyIsIChldmVudCkgPT4gewogICAgICAgICAgICBjb25zdCBbeCwgeV0gPSBkMy5wb2ludGVyKGV2ZW50KTsKICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVBdCh4LCB5KTsKICAgICAgICAgICAgaWYgKG5vZGUpIHsKICAgICAgICAgICAgICAgIGRyYWdOb2RlID0gbm9kZTsKICAgICAgICAgICAgICAgIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4zKS5yZXN0YXJ0KCk7CiAgICAgICAgICAgICAgICBkcmFnTm9kZS5meCA9IGRyYWdOb2RlLng7CiAgICAgICAgICAgICAgICBkcmFnTm9kZS5meSA9IGRyYWdOb2RlLnk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5vbigibW91c2Vtb3ZlLmRyYWciLCAoZXZlbnQpID0+IHsKICAgICAgICAgICAgaWYgKGRyYWdOb2RlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBbeCwgeV0gPSBkMy5wb2ludGVyKGV2ZW50KTsKICAgICAgICAgICAgICAgIGRyYWdOb2RlLmZ4ID0gdHJhbnNmb3JtLmludmVydFgoeCk7CiAgICAgICAgICAgICAgICBkcmFnTm9kZS5meSA9IHRyYW5zZm9ybS5pbnZlcnRZKHkpOwogICAgICAgICAgICAgICAgZHJhdygpOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAub24oIm1vdXNldXAuZHJhZyBtb3VzZWxlYXZlLmRyYWciLCAoKSA9PiB7CiAgICAgICAgICAgIGlmIChkcmFnTm9kZSkgewogICAgICAgICAgICAgICAgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTsKICAgICAgICAgICAgICAgIGRyYWdOb2RlLmZ4ID0gbnVsbDsKICAgICAgICAgICAgICAgIGRyYWdOb2RlLmZ5ID0gbnVsbDsKICAgICAgICAgICAgICAgIGRyYWdOb2RlID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyBJbml0aWFsIGRyYXcuCiAgICAgICAgZHJhdygpOwogICAgfSkoKTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4="
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Analyze and solve.</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">analyze</span><span class="p">()</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span>
    <span class="n">initial_vals</span><span class="o">=</span><span class="n">jaxls</span><span class="o">.</span><span class="n">VarValues</span><span class="o">.</span><span class="n">make</span><span class="p">([</span><span class="n">cam_var</span><span class="o">.</span><span class="n">with_value</span><span class="p">(</span><span class="n">initial_ctrl</span><span class="p">)]),</span>
    <span class="n">termination</span><span class="o">=</span><span class="n">jaxls</span><span class="o">.</span><span class="n">TerminationConfig</span><span class="p">(</span><span class="n">cost_tolerance</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">opt_ctrl</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">cam_var</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimized </span><span class="si">{</span><span class="n">N_CTRL</span><span class="si">}</span><span class="s2"> control points&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Radius range: [</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">opt_ctrl</span><span class="p">))</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">opt_ctrl</span><span class="p">))</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">INFO    </span> | Building optimization problem with 105 terms and 1 variables: 88 costs, 0 eq_zero, 17 leq_zero, 0 geq_zero
<span class=" -Color -Color-Bold">INFO    </span> | Vectorizing group with 72 costs, 1 variables each: motion_tracking_cost
<span class=" -Color -Color-Bold">INFO    </span> | Vectorizing constraint group with 1 constraints (constraint_leq_zero), 1 variables each: augmented_min_radius_constraint
<span class=" -Color -Color-Bold">INFO    </span> | Vectorizing group with 16 costs, 1 variables each: smoothness_cost
<span class=" -Color -Color-Bold">INFO    </span> | Vectorizing constraint group with 16 constraints (constraint_leq_zero), 1 variables each: augmented_pressure_angle_constraint
<span class=" -Color -Color-Bold">INFO    </span> | Augmented Lagrangian: initial snorm=0.0000e+00, csupn=0.0000e+00, max_rho=9.2798e+02, constraint_dim=32
<span class=" -Color -Color-Bold">INFO    </span> |  step #0: cost=92.7978 lambd=0.0005 inexact_tol=1.0e-02
<span class=" -Color -Color-Bold">INFO    </span> |      - motion_tracking_cost(72): 92.78764 (avg 1.28872)
<span class=" -Color -Color-Bold">INFO    </span> |      - augmented_min_radius_constraint(1): 0.00000 (avg 0.00000)
<span class=" -Color -Color-Bold">INFO    </span> |      - smoothness_cost(16): 0.01011 (avg 0.00063)
<span class=" -Color -Color-Bold">INFO    </span> |      - augmented_pressure_angle_constraint(16): 0.00000 (avg 0.00000)
<span class=" -Color -Color-Bold">INFO    </span> |      accepted=True ATb_norm=2.03e+02 cost_prev=92.7977 cost_new=0.0211
<span class=" -Color -Color-Bold">INFO    </span> |  step #1: cost=0.0211 lambd=0.0003 inexact_tol=1.0e-02
<span class=" -Color -Color-Bold">INFO    </span> |      - motion_tracking_cost(72): 0.00084 (avg 0.00001)
<span class=" -Color -Color-Bold">INFO    </span> |      - augmented_min_radius_constraint(1): 0.00000 (avg 0.00000)
<span class=" -Color -Color-Bold">INFO    </span> |      - smoothness_cost(16): 0.02025 (avg 0.00127)
<span class=" -Color -Color-Bold">INFO    </span> |      - augmented_pressure_angle_constraint(16): 0.00000 (avg 0.00000)
<span class=" -Color -Color-Bold">INFO    </span> |      accepted=False ATb_norm=2.44e-04 cost_prev=0.0211 cost_new=0.0211
<span class=" -Color -Color-Bold">INFO    </span> |  AL update: snorm=0.0000e+00, csupn=0.0000e+00, max_rho=9.2798e+02
<span class=" -Color -Color-Bold">INFO    </span> | Terminated @ iteration #2: cost=0.0211 criteria=[1 0 1], term_deltas=4.4e-07,1.4e-04,1.7e-07
Optimized 16 control points
Radius range: [0.999, 1.301]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Evaluate optimized cam.</span>
<span class="n">eval_thetas</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">achieved_radii</span> <span class="o">=</span> <span class="n">jax</span><span class="o">.</span><span class="n">vmap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">eval_cam_radius</span><span class="p">(</span><span class="n">opt_ctrl</span><span class="p">,</span> <span class="n">th</span><span class="p">))(</span><span class="n">eval_thetas</span><span class="p">)</span>
<span class="n">target_radii_fine</span> <span class="o">=</span> <span class="n">R_BASE</span> <span class="o">+</span> <span class="n">jax</span><span class="o">.</span><span class="n">vmap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">target_displacement</span><span class="p">(</span><span class="n">th</span><span class="p">,</span> <span class="n">LIFT</span><span class="p">))(</span>
    <span class="n">eval_thetas</span>
<span class="p">)</span>

<span class="c1"># Compute pressure angles.</span>
<span class="n">pressure_angles</span> <span class="o">=</span> <span class="n">jax</span><span class="o">.</span><span class="n">vmap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">th</span><span class="p">:</span> <span class="n">compute_pressure_angle</span><span class="p">(</span><span class="n">opt_ctrl</span><span class="p">,</span> <span class="n">th</span><span class="p">))(</span><span class="n">eval_thetas</span><span class="p">)</span>

<span class="c1"># Compute errors.</span>
<span class="n">tracking_error</span> <span class="o">=</span> <span class="n">achieved_radii</span> <span class="o">-</span> <span class="n">target_radii_fine</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Motion tracking:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  RMS error: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">tracking_error</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Max error: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">tracking_error</span><span class="p">)))</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Pressure angle:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Max: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pressure_angles</span><span class="p">)))</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Limit: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">MAX_PRESSURE_ANGLE</span><span class="p">))</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Motion tracking:
  RMS error: 0.0003
  Max error: 0.0009

Pressure angle:
  Max: 18.1°
  Limit: 30.0°
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Link to this heading">#</a></h2>
<p>View the optimized cam profile and its motion characteristics:</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">go</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">plotly.subplots</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_subplots</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTML</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span>
    <span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">specs</span><span class="o">=</span><span class="p">[[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xy&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xy&quot;</span><span class="p">}]],</span>
    <span class="n">subplot_titles</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Cam Profile&quot;</span><span class="p">,</span> <span class="s2">&quot;Follower Displacement&quot;</span><span class="p">),</span>
    <span class="n">horizontal_spacing</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Cam profile (polar to cartesian)</span>
<span class="n">cam_xy</span> <span class="o">=</span> <span class="n">cam_profile_xy</span><span class="p">(</span><span class="n">opt_ctrl</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
<span class="n">target_xy</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">target_radii_fine</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">eval_thetas</span><span class="p">),</span>
        <span class="n">target_radii_fine</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">eval_thetas</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Target profile.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">target_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">target_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dash</span><span class="o">=</span><span class="s2">&quot;dash&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Target&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Optimized cam.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cam_xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cam_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cam_xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">cam_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;steelblue&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Optimized&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Base circle.</span>
<span class="n">base_theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">R_BASE</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">base_theta</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">R_BASE</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">base_theta</span><span class="p">),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dash</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Base circle&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Control points.</span>
<span class="n">ctrl_thetas</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">N_CTRL</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ctrl_x</span> <span class="o">=</span> <span class="n">opt_ctrl</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ctrl_thetas</span><span class="p">)</span>
<span class="n">ctrl_y</span> <span class="o">=</span> <span class="n">opt_ctrl</span> <span class="o">*</span> <span class="n">jnp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ctrl_thetas</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">ctrl_x</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="n">ctrl_y</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#e67e22&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Control pts&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Follower displacement.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">eval_thetas</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">target_radii_fine</span> <span class="o">-</span> <span class="n">R_BASE</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dash</span><span class="o">=</span><span class="s2">&quot;dash&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Target&quot;</span><span class="p">,</span>
        <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">eval_thetas</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">achieved_radii</span> <span class="o">-</span> <span class="n">R_BASE</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;steelblue&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Achieved&quot;</span><span class="p">,</span>
        <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Mark motion phases with alternating colors.</span>
<span class="n">phase_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgba(200,200,200,0.2)&quot;</span><span class="p">,</span> <span class="s2">&quot;rgba(100,149,237,0.2)&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="p">),</span> <span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">270</span><span class="p">),</span> <span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">360</span><span class="p">)]):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_vrect</span><span class="p">(</span>
        <span class="n">x0</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
        <span class="n">x1</span><span class="o">=</span><span class="n">end</span><span class="p">,</span>
        <span class="n">fillcolor</span><span class="o">=</span><span class="n">phase_colors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">],</span>
        <span class="n">line_width</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">scaleanchor</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">scaleratio</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cam angle (°)&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">],</span> <span class="n">dtick</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Displacement&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
    <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">legend</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">full_html</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">include_plotlyjs</span><span class="o">=</span><span class="s2">&quot;cdn&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="b34df666-c296-4812-bb78-3df5a14b2aef" class="plotly-graph-div" style="height:400px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("b34df666-c296-4812-bb78-3df5a14b2aef")) {                    Plotly.newPlot(                        "b34df666-c296-4812-bb78-3df5a14b2aef",                        [{"line":{"color":"crimson","dash":"dash","width":2},"mode":"lines","name":"Target","x":{"dtype":"f4","bdata":"AACAPwX2fz8U2H8\u002fL6Z\u002fP1xgfz+eBn8\u002f\u002fZh+P4EXfj81gn0\u002fJdl8P1wcfD\u002frS3s\u002f4md6P1FweT9NZXg\u002f6kZ3Pz8Vdj9j0HQ\u002fcHhzP4ENcj+yj3A\u002fIP9uP+xbbT80pms\u002fHd5pP8kDaD9dF2Y\u002fARlkP9oIYj8T518\u002f17NdP1FvWz+uGVk\u002fHbNWP847VD\u002fys1E\u002fvBtPP2BzTD8Su0k\u002fCfNGP3wbRD+lNEE\u002fvD4+P\u002f45Oz+mJjg\u002f8gQ1PyDVMT9xly4\u002fJEwrP3vzJz+6jSQ\u002fIxshP\u002fybHT+MEBo\u002fF3kWP+bVEj9DJw8\u002fdW0LP8ioBz+H2QM\u002f\u002fP\u002f\u002fPvY4+D6SXvA+b3HoPity4D5oYdg+xD\u002fQPuQNyD5tzL8+\u002fnu3PkAdrz7asKY+dTeePrmxlT5VII0+64OEPli6dz6JWWY+w+ZUPmNjQz7H0DE+VTAgPl2DDj6Qlvk98BLWPZ5+sj1h3I49H15WPabyDj0N+I48TO8utNb4jrzI8w69V2JWvdzijr0ojrK94DLWvV3R+b0+tQ6+yH8gviZJMr6AEkS+EN1VvkCqZ76fe3m+aqmFvsiYjr7VjJe+dYagvo6Gqb78jbK+nZ27vjW2xL6J2M2+PgXXvuw84L78f+m+1c7yvrgp\u002fL5XyAK\u002f34EHv1RBDL+KBhG\u002fRNEVvyKhGr\u002fAdR+\u002fj04kv\u002f0qKb9TCi6\u002fz+syv5fON7+ysTy\u002fJZRBv850Rr+NUku\u002fHCxQvzgAVb+MzVm\u002fqpJevy1OY7+X\u002fme\u002fa6Jsvyo4cb9LvnW\u002fSzN6v6GVfr\u002focYG\u002fLo6Dv+eehb9io4e\u002f7pqJv+OEi7+iYI2\u002flC2PvynrkL\u002ffmJK\u002fPjaUv9fClb9LPpe\u002fRaiYv3wAmr+4Rpu\u002fy3qcv5acnb8HrJ6\u002fG6mfv9mToL9ZbKG\u002fvDKivzLnor\u002f3iaO\u002fTxukv4ybpL8IC6W\u002fJmqlv1G5pb\u002f9+KW\u002foimmv75Lpr\u002fTX6a\u002fZmamv+lfpr9zTKa\u002fBSymv6H+pb9MxKW\u002fCn2lv+Aopb\u002fVx6S\u002f8Vmkvzvfo7++V6O\u002fhMOiv5oior8KdaG\u002f5LqgvzT0n78MIZ+\u002fekGev5JVnb9mXZy\u002fBlmbv4tImr8HLJm\u002fkQOYv0LPlr8uj5W\u002fckOUvyXskr9kiZG\u002fSRuQv\u002fKhjr98HY2\u002fBI6Lv6vzib+OToi\u002f0p6Gv5XkhL\u002f9H4O\u002fK1GBv4Pwfr\u002fSKnu\u002fiFF3v\u002flkc79uZW+\u002fNVNrv6YuZ78M+GK\u002fw69evxlWWr9o61W\u002fDHBRv1zkTL+wSEi\u002faJ1Dv9XiPr9oGTq\u002feUE1v2ZbML+UZyu\u002fW2YmvzFYIb9yPRy\u002fgxYXv83jEb+tpQy\u002fn1wHvwMJAr+FVvm+f4fuvvSl476nsti+da7Nvjmawr68dre+BUWsvt4Fob4pupW+x2KKvg4Bfr7mKGe+uD5Qvk1EOb5vOyK+wSULvscK6L3zt7m9o1aLvUXUOb3a2rm8to8qNWzduTzP1Dk9TVWLPU2yuT0S\u002fOc9NBYLPkkeIj7WEjk+sO9PPvGwZj5aUn0+weeJPgISlT5vJaA+uh+rPnj+tT5Pv8A+p1\u002fLPibd1T5pNeA+E2bqPuts9D6SR\u002f4++vkDPwW4CD\u002f0XA0\u002f5ucRP\u002fZXFj9prBo\u002fkeQeP9X\u002fIj+4\u002fSY\u002fwN0qP52fLj8TQzI\u002fAsg1P1QuOT8Zdjw\u002fc58\u002fP5+qQj\u002f3l0U\u002f12dIP8EaSz9LsU0\u002fGixQP+uLUj990VQ\u002fqf1WP1cRWT95DVs\u002fAfNcP\u002fDCXj9MfmA\u002fIiZiP3y7Yz9hP2U\u002f17JmP+AWaD97bGk\u002fmrRqPyLwaz\u002fsH20\u002fxkRuP3Jfbz+XcHA\u002fznhxP5x4cj9zcHM\u002frmB0P41JdT9AK3Y\u002f2AV3P1bZdz+ipXg\u002fhGp5P7cnej\u002fa3Ho\u002feYl7PwktfD\u002fqxnw\u002fbFZ9P8nafT8zU34\u002fx75+P5Ycfz+la38\u002f9qp\u002fP4DZfz8z9n8\u002fAACAPw=="},"y":{"dtype":"f4","bdata":"AAAAAFr4jjzH8g49PF5WPXzcjj23frI9BhPWPaSW+T1mgw4+XTAgPtbQMT5wY0M+z+ZUPpNZZj5hunc+74OEPlggjT6\u002fsZU+ezeePt+wpj5FHa8+Any3PnDMvz7rDcg+yj\u002fQPm1h2D4wcuA+c3HoPpVe8D75OPg+AQAAP4rZAz\u002fLqAc\u002feG0LP0UnDz\u002fp1RI\u002fGXkWP40QGj\u002f+mx0\u002fJRshP7yNJD998yc\u002fJkwrP3OXLj8i1TE\u002f9AQ1P6gmOD8AOjs\u002fvj4+P6c0QT9+G0Q\u002fC\u002fNGPxS7ST9hc0w\u002fvhtPP\u002fSzUT\u002fPO1Q\u002fHrNWP68ZWT9Sb1s\u002f2bNdPxTnXz\u002fbCGI\u002fAhlkP18XZj\u002fKA2g\u002fH95pPzamaz\u002fsW20\u002fIf9uP7OPcD+CDXI\u002fcXhzP2TQdD8\u002fFXY\u002f60Z3P01leD9ScHk\u002f4md6P+xLez9dHHw\u002fJdl8PzaCfT+BF34\u002f\u002fZh+P54Gfz9cYH8\u002fL6Z\u002fPxTYfz8F9n8\u002fAACAPzP2fz+A2X8\u002f9ap\u002fP6Rrfz+UHH8\u002fxb5+PzJTfj\u002fK2n0\u002falZ9P+jGfD8GLXw\u002fd4l7P9fcej+0J3o\u002fgGp5P5+leD9V2Xc\u002f1QV3Pzwrdj+KSXU\u002frGB0P3Fwcz+aeHI\u002fynhxP5RwcD9vX28\u002fxkRuP+gfbT8c8Gs\u002flbRqP3lsaT\u002feFmg\u002f0bJmP1s\u002fZT92u2M\u002fHyZiP0d+YD\u002fpwl4\u002f+vJcP3INWz9UEVk\u002fpP1WP3fRVD\u002fii1I\u002fFSxQP0axTT+5Gks\u002fzWdIP+uXRT+ZqkI\u002fbJ8\u002fPw52PD9KLjk\u002f9cc1PwxDMj+Qny4\u002ftN0qP679Jj\u002fN\u002fyI\u002fieQeP1ysGj\u002foVxY\u002f1OcRP+tcDT\u002f7twg\u002f6\u002fkDP3NH\u002fj7CbPQ+\u002fmXqPkk14D4I3dU+h1\u002fLPiW\u002fwD5h\u002frU+mR+rPk0loD7gEZU+queJPilSfT6rsGY+au9PPnsSOT4XHiI+AhYLPoT75z2\u002fsbk9lVSLPQfUOT0y27k8SWrjtBLduby11Tm9B1eLvYG4ub1VC+i9CCYLvqE7Ir5+RDm+\u002fj5QviwpZ75nAX6+4GKKvkK6lb4BBqG+J0Wsvuh2t75SmsK+l67Nvsmy2L4VpuO+qofuvp1W+b4TCQK\u002fr1wHv76lDL\u002fZ4xG\u002fjxYXv4E9HL9AWCG\u002fb2Ymv59nK79yWzC\u002fh0E1v3cZOr\u002fo4j6\u002fcp1Dv79ISL9q5Ey\u002fGnBRv3nrVb8mVlq\u002f0a9evxn4Yr+wLme\u002fQlNrv3dlb78FZXO\u002flFF3v94qe7+R8H6\u002fMFGBvwIgg7+a5IS\u002f1Z6Gv5VOiL+v84m\u002fCI6Lv4Adjb\u002f2oY6\u002fTxuQv2mJkb8q7JK\u002fdUOUvzGPlb9Gz5a\u002flQOYvwosmb+OSJq\u002fClmbv2hdnL+VVZ2\u002ffUGevw4hn7839J+\u002f5rqgvw11ob+bIqK\u002fhsOiv8BXo78936O\u002f8lmkv9bHpL\u002fhKKW\u002fC32lv03Epb+i\u002fqW\u002fBSymv3NMpr\u002fpX6a\u002fZmamv9Nfpr++S6a\u002foSmmv\u002f34pb9RuaW\u002fJWqlvwgLpb+Lm6S\u002fThukv\u002faJo78w56K\u002fujKiv1Zsob\u002fWk6C\u002fGKmfvwWsnr+SnJ2\u002fx3qcv7RGm795AJq\u002fQqiYv0Y+l7\u002fTwpW\u002fOTaUv9uYkr8l65C\u002fji2Pv5xgjb\u002fehIu\u002f6ZqJv12jh7\u002fgnoW\u002fJ46Dv+Jxgb+WlX6\u002fOTN6vz6+db8eOHG\u002fYaJsv4z+Z78dTmO\u002fnJJev33NWb8tAFW\u002fESxQv3pSS7+\u002fdEa\u002fFZRBv6axPL+Czje\u002fwesyv0YKLr\u002fvKim\u002fhE4kv6x1H78UoRq\u002fNtEVv38GEb9KQQy\u002fzIEHv0rIAr+bKfy+wM7yvul\u002f6b7GPOC+IgXXvnHYzb4htsS+eZ27vt2Nsr5zhqm+X4agvsKMl76pmI6+S6mFvmp7eb4Tqme+6dxVvkESRL7xSDK+kn8gvg+1Dr4Q0fm9YzLWvbuNsr1\u002f4o69vWFWva3yDr3g9o68AAAAAA=="},"type":"scatter","xaxis":"x","yaxis":"y"},{"line":{"color":"steelblue","width":3},"mode":"lines","name":"Optimized","x":{"dtype":"f4","bdata":"zu5\u002fP67hfz9vwX8\u002fA45\u002fP2BHfz967X4\u002fSIB+P8H\u002ffT\u002fka30\u002fqMR8PwcKfD8IPHs\u002folp6P9tleT+3XXg\u002fNkJ3P2UTdj9J0XQ\u002f6HtzP1kTcj+el3A\u002f0QhvPwFnbT86sms\u002fq+ppP38QaD\u002fWI2Y\u002f+CRkPwUUYj9A8V8\u002f0bxdP\u002fh2Wz\u002fqH1k\u002f07dWP\u002fw+VD+ctVE\u002f3htPPxVyTD9yuEk\u002fK+9GP48WRD\u002fMLkE\u002fMzg+P\u002fsyOz9dHzg\u002fq\u002f00PxbOMT\u002fjkC4\u002fQkYrP2nuJz+XiSQ\u002fBRghP+uZHT+TDxo\u002fM3kWPw7XEj9qKQ8\u002fh3ALP62sBz8i3gM\u002fMQUAP0FE+D54avA+oX3oPll+4D4\u002fbdg+80rQPhsYyD5g1b8+cYO3Pgcjrz7gtKY+uTmePkWylT5FH40+Z4GEPseydz7gT2Y+gNtUPgdXQz7ZwzE+WCMgPtB2Dj47f\u002fk9J\u002f7VPQNtsj1mzo492ElWPf7lDj2v7I48ieMutHHxjrzy7g69M19WvYjjjr1QkrK9eTvWvfje+b2Yvg6+e4sgvrNWMr4oIUS+0etVvuq3Z77bhnm+Iq2FvvKZjr7jipe+B4Ggvoh9qb6mgbK+to67vh6mxL5cyc2+UPnWvj824L4sgOm+Dtfyvrk6\u002fL5n1QK\u002fcpMHvytXDL85IBG\u002fN+4Vv6DAGr\u002fzlh+\u002fi3Akv8lMKb\u002ftKi6\u002fNwozv9XpN7\u002feyDy\u002fcKZBv4KBRr8bWUu\u002fGyxQv235VL\u002fov1m\u002fVn5ev4AzY78c3me\u002f23xsv20Ocb9tkXW\u002fgQR6vzNmfr+PWoG\u002f4XeDv1eKhb80kYe\u002ftIuJvxp5i7+hWI2\u002fiSmPvw\u002frkL9xnJK\u002f7zyUv8bLlb8+SJe\u002f9rGYv\u002fQImr9CTZu\u002f9n6cvyuenb8Bq56\u002foKWfvzSOoL\u002fvZKG\u002fCyqiv8Ldor9YgKO\u002fERKkvzeTpL8YBKW\u002fBWWlv1a2pb9h+KW\u002ffiumvwxQpr9tZqa\u002f\u002fm6mvxNqpr\u002fDV6a\u002fGDimvx0Lpr\u002fd0KW\u002fY4mlv700pb\u002f90qS\u002fLmSkv2Poo7+tX6O\u002fI8qiv9Mnor\u002fTeKG\u002fPL2gvyD1n7+YIJ+\u002fuz+ev6VSnb9uWZy\u002fLVSbv\u002f9Cmr8CJpm\u002fSP2Xv+jIlr\u002fviJW\u002fdj2Uv4zmkr9LhJG\u002fyBaQvxyejr9dGo2\u002fpYuLvxHyib+6TYi\u002fvp6GvzrlhL9NIYO\u002fF1OBv3L1fr+lMHu\u002fEFh3v\u002f1rc7+0bG+\u002fe1prv6w1Z7+X\u002fmK\u002fo7VevyhbWr+K71W\u002fKnNRv2nmTL+oSUi\u002fSp1Dv6zhPr8\u002fFzq\u002fZD41v4BXML\u002f5Yiu\u002fKGEmv4pSIb9+Nxy\u002faRAXv7bdEb\u002fAnwy\u002fB1cHv+YDAr+PTfm+C4Duviug476grti+MazNvquZwr7Ld7e+iUesvqcJob79vpW+aWiKvmgNfr7TNWe+tEtQvtlQOb4ZRyK+JTALvmIc6L3txbm9x2CLve3gOb045rm8iZgqNc\u002fkuTyk2Tk93laLPaGxuT3o9+c95xELPnsXIj56CTk+\u002fONPPmOjZj6xQ30+YOCJPi0LlT7RH6A+ARyrPlD9tT5BwcA+E2XLPirm1T6\u002fQeA++nTqPgF99D6+Vv4+8f8DP1u7CD\u002fdXA0\u002fyeMRP3RPFj9Znxo\u002f\u002ftIeP\u002f7pIj8J5CY\u002fzcAqPx2ALj\u002fgITI\u002fBaY1P4YMOT99VTw\u002fCYE\u002fP2GPQj\u002fJgEU\u002fi1VIPw0OSz+\u002fqk0\u002fHCxQP7eSUj8d31Q\u002f\u002fBFXPwMsWT\u002f1LVs\u002fjhhdP63sXj8pq2A\u002f7FRiP+vqYz8VbmU\u002fb99mP\u002f4\u002faD\u002fYkGk\u002fD9NqP7QHbD\u002fuL20\u002f3UxuP6Vfbz9yaXA\u002fbWtxP75mcj+PXHM\u002fSU10P504dT8rHnY\u002fgP12PyvWdz+up3g\u002feXF5PwEzej+p63o\u002f15p7P+c\u002ffD8n2nw\u002f5Wh9P3PrfT8TYX4\u002fAsl+P4oifz\u002fcbH8\u002fPKd\u002fP9zQfz\u002f86H8\u002fzu5\u002fPw=="},"y":{"dtype":"f4","bdata":"AAAAAP3sjjwg5g49+ElWPYLOjj0ebbI9QP7VPU9\u002f+T3adg4+YiMgPujDMT4WV0M+i9tUPupPZj7Rsnc+aoGEPkgfjT5LspU+vDmePuW0pj4JI68+c4O3PmXVvz4gGMg++ErQPkdt2D5afuA+pX3oPnVq8D5BRPg+MAUAPyPeAz+wrAc\u002fh3ALP2opDz8T1xI\u002fMnkWP5MPGj\u002fxmR0\u002fAxghP5qJJD9n7ic\u002fREYrP+mQLj8ZzjE\u002frf00P14fOD\u002f4Mjs\u002fNjg+P9EuQT+QFkQ\u002fMu9GP2+4ST8Xckw\u002f5RtPP5u1UT8AP1Q\u002f2bdWP+sfWT\u002f9dls\u002f2rxdP0TxXz8LFGI\u002f+SRkP9sjZj98EGg\u002fr+ppPz6yaz\u002f\u002fZm0\u002f1AhvP6OXcD9aE3I\u002f7XtzP0rRdD9lE3Y\u002fOEJ3P7ZdeD\u002fcZXk\u002fo1p6Pwc8ez8ICnw\u002fpcR8P+NrfT\u002fB\u002f30\u002fRYB+P3ftfj9eR38\u002fAI5\u002fP23Bfz+r4X8\u002fyu5\u002fP\u002ffofz\u002fX0H8\u002fN6d\u002fP9dsfz+EIn8\u002f\u002fsh+Pwxhfj9s630\u002f4Wh9Px\u002fafD\u002fgP3w\u002f0pp7P6Trej\u002f4Mno\u002fcXF5P6aneD8m1nc\u002fef12PyIedj+WOHU\u002fQU10P4hccz+5ZnI\u002fZWtxP2tpcD+gX28\u002f10xuP+UvbT+tB2w\u002fBtNqP9KQaT\u002f5P2g\u002fZt9mPwtuZT\u002fg6mM\u002f5lRiPyCrYD+j7F4\u002fhhhdP+ktWz\u002f9K1k\u002f9BFXPxbfVD+sklI\u002fFCxQP7aqTT8BDks\u002ff1VIP7uART9Yj0I\u002fAYE\u002fP3JVPD96DDk\u002f96U1P9YhMj8RgC4\u002fvsAqP\u002frjJj\u002f06SI\u002f9NIeP0ufGj9lTxY\u002fteMRP9BcDT9Puwg\u002f4f8DP55W\u002fj7XfPQ+4HTqPp5B4D4J5tU+8mTLPhTBwD41\u002fbU+3hurPqwfoD4IC5U+RuCJPnxDfT4Zo2Y+s+NPPh0JOT5GFyI+shELPlj35z0Qsbk9JVaLPdfYOT2S4rk8B3bjtGzoubxZ4jm9KGGLvXnGub3rHOi9azALvkhHIr4JUTm+90tQvhY2Z76+DX6+gGiKvhS\u002flb7ICaG+qkesvvZ3t77EmcK+UqzNvsKu2L5PoOO+N4DuvqdN+b73AwK\u002fF1cHv9GfDL\u002fB3RG\u002fdRAXv403HL+aUiG\u002fPGEmvwJjK7+LVzC\u002fdD41v04XOr+\u002f4T6\u002fVp1Dv7hJSL945ky\u002fOHNRv5zvVb82W1q\u002fs7Vev6T+Yr+1NWe\u002fiFprv71sb78JbHO\u002fGlh3v68we79+9X6\u002fHVOBv1Ihg78\u002f5YS\u002fwZ6Gv8FNiL8V8om\u002fqYuLv2Eajb8gno6\u002fzhaQv1CEkb+R5pK\u002fdz2Uv\u002fKIlb\u002fryJa\u002fTf2XvwQmmb8CQ5q\u002fMFSbv3BZnL+pUp2\u002fvz+ev5ogn78k9Z+\u002fP72gv9h4ob\u002fVJ6K\u002fJcqiv7Jfo79n6KO\u002fMWSkv\u002f\u002fSpL\u002fBNKW\u002fZomlv+DQpb8gC6a\u002fHTimv8ZXpr8Xaqa\u002fAW+mv3Bmpr8QUKa\u002fgCumv2P4pb9YtqW\u002fCGWlvxoEpb84k6S\u002fERKkv1mAo7\u002fD3aK\u002fDCqiv\u002fBkob80jqC\u002fn6WfvwKrnr8pnp2\u002f836cvz9Nm7\u002fyCJq\u002f9rGYvzpIl7\u002fCy5W\u002f7DyUv26ckr8O65C\u002fhCmPv51Yjb8VeYu\u002fsIuJvzGRh79TioW\u002f3XeDv4hagb8sZn6\u002fcQR6v2KRdb9iDnG\u002f0nxsvxTeZ79yM2O\u002fSn5ev96\u002fWb9k+VS\u002fEyxQvwlZS790gUa\u002fYaZBv9fIPL\u002fE6Te\u002fKQozv+IqLr+9TCm\u002fg3Akv+OWH7+VwBq\u002fK+4VvzAgEb8jVwy\u002fYpMHv1vVAr+iOvy+\u002ftbyvhqA6b4cNuC+OPnWvkXJzb4OpsS+lY67vomBsr5wfam+84CgvtKKl77WmY6+Ba2FvqyGeb6\u002ft2e+rutVvuwgRL6CVjK+Rosgvm2+Dr6x3vm9\u002fjrWveaRsr0t4469nF5WvdrtDr1+7468AAAAAA=="},"type":"scatter","xaxis":"x","yaxis":"y"},{"line":{"color":"gray","dash":"dot","width":1},"mode":"lines","name":"Base circle","x":{"dtype":"f8","bdata":"AAAAAAAA8D+VSynBge\u002fvP2j6BgUYvu8\u002fJek3u\u002fVr7z8jfxaOb\u002fnuP\u002fFJcov7Zu4\u002fXLHeqjC17T9+NRQyxuTsP1+hBPiS9us\u002fuvBkh4zr6j9WMpEhxsTpPzlQz6Jvg+g\u002ftTkVSdQo5z+WUJVeWbblP0ATccl8LeQ\u002fA6sNgtOP4j9cLKDxB9\u002fgP1a1P3WwOd4\u002fthLH2SiW2j+KU4hOOdfWP1tDY1G+ANM\u002fjFrgSlktzj+Mcwt+GjrGPyLsuGvkX7w\u002fcyCwKKhcqD\u002fN+ijPKj+QvwzJ6KS5SbS\u002f3kQPZF83wr9P3qvaGjfKv5OAwi7oDdG\u002fPSGBd67u1L83i\u002fTn4LnYv4vJmF6Wa9y\u002fAgAAAAAA4L\u002fP5tyRtrnhv860DJEnYeO\u002fh1h3f5705L\u002fbPrV2e3Lmv11Sx9Q02ee\u002fJuDa0Vgn6b9dHHf9jlvqv4pZi6GZdOu\u002fwfLvCVdx7L\u002fZTwivwlDtvxstUkL2Ee6\u002fV1DNmyq07r9D8kaHuDbvvwQ9tXAZme+\u002fXjTx7ufa778HB0As4PvvvwcHQCzg+++\u002fXjTx7ufa778EPbVwGZnvv0PyRoe4Nu+\u002fV1DNmyq07r8cLVJC9hHuv9lPCK\u002fCUO2\u002fwvLvCVdx7L+JWYuhmXTrv14cd\u002f2OW+q\u002fJeDa0Vgn6b9eUsfUNNnnv9o+tXZ7cua\u002fiFh3f5705L\u002fMtAyRJ2Hjv9Hm3JG2ueG\u002f+f\u002f\u002f\u002f\u002f\u002f\u002f37+IyZhelmvcvzeL9Ofgudi\u002fQSGBd67u1L+MgMIu6A3Rv0jeq9oaN8q\u002f3kQPZF83wr8eyeikuUm0v1T6KM8qP5C\u002fkCCwKKhcqD8R7Lhr5F+8P3xzC34aOsY\u002fk1rgSlktzj9aQ2NRvgDTP4ZTiE4519Y\u002fvRLH2SiW2j9ZtT91sDneP1wsoPEH3+A\u002fAasNgtOP4j9DE3HJfC3kP5dQlV5ZtuU\u002ftDkVSdQo5z83UM+ib4PoP1gykSHGxOk\u002fuvBkh4zr6j9foQT4kvbrP301FDLG5Ow\u002fXbHeqjC17T\u002fxSXKL+2buPyN\u002fFo5v+e4\u002fJuk3u\u002fVr7z9o+gYFGL7vP5VLKcGB7+8\u002fAAAAAAAA8D8="},"y":{"dtype":"f8","bdata":"AAAAAAAAAAADhrXMjDywP\u002fCDAnguNMA\u002fkayggGI5yD+aiNkBzxLQP9kfIiFb+NM\u002f+5MNU1HJ1z+CQNqEwoHbPxlNPurYHd8\u002fC1i7+O1M4T9GhZoMGvniPxwWPFK3keQ\u002fABg\u002flCAV5j+GGZN4xoHnP4hAIRwx1ug\u002flkFFlgER6j93zoZi8zDrPzKcHq\u002fdNOw\u002fEyzujrQb7T\u002fB8a4NiuTtP\u002f0jPCWPju4\u002f3176khQZ7z8XHIGMi4PvPzTGy1KGze8\u002fg6xao7j27z\u002fvOc8G+P7vP2Zmsvw75u8\u002f70I4BJ6s7z+\u002fl\u002feBWVLvPwOssILL1+4\u002fxVNiW3I97j+TIxAn7YPtP1EHwCL7q+w\u002fqkxY6Hq26z+RVimJaaTqP5aCD4nhduk\u002foSg6uxkv6D+258MBZM7mP9KHZvErVuU\u002f8nixWvXH4z8mRkW6WiXiP2ITsJELcOA\u002f8qg+VZVT3T\u002fagWKM2KjZP\u002fgLinSo49U\u002fv412\u002fecH0j\u002flKaSyIjPMP+bENsZjOcQ\u002f3FNHxZdVuD+s23zJpD6gP8nbfMmkPqC\u002f6lNHxZdVuL\u002ftxDbGYznEv9wppLIiM8y\u002fwo12\u002fecH0r\u002f0C4p0qOPVv92BYozYqNm\u002f7qg+VZVT3b9jE7CRC3DgvyRGRbpaJeK\u002f83ixWvXH47\u002fRh2bxK1blv7fnwwFkzua\u002foCg6uxkv6L+Xgg+J4Xbpv5BWKYlppOq\u002frExY6Hq2679SB8Ai+6vsv5MjECftg+2\u002fxFNiW3I97r8ErLCCy9fuv7+X94FZUu+\u002f70I4BJ6s779lZrL8O+bvv+85zwb4\u002fu+\u002fg6xao7j27780xstShs3vvxgcgYyLg++\u002f3176khQZ77\u002f9Izwlj47uv8Lxrg2K5O2\u002fEizujrQb7b8xnB6v3TTsv3fOhmLzMOu\u002fl0FFlgER6r+GQCEcMdbov4UZk3jGgee\u002fABg\u002flCAV5r8fFjxSt5Hkv0SFmgwa+eK\u002fC1i7+O1M4b8bTT7q2B3fv4dA2oTCgdu\u002f9ZMNU1HJ17\u002fZHyIhW\u002fjTv52I2QHPEtC\u002fgKyggGI5yL\u002fogwJ4LjTAvwSGtcyMPLC\u002fB1wUMyamsbw="},"type":"scatter","xaxis":"x","yaxis":"y"},{"marker":{"color":"#e67e22","size":8},"mode":"markers","name":"Control pts","x":{"dtype":"f4","bdata":"ZtZ\u002fP7OzbD+8wzQ\u002fXpLEPlrmV7OHE\u002f6+a5Rrv6Gjmb8xe6a\u002fnqOZv26Ua794E\u002f6+GZlrMmeSxD7DwzQ\u002fsLNsPw=="},"y":{"dtype":"f4","bdata":"AAAAACAXxD68wzQ\u002feUhtPzIzkz87WZk\u002fa5RrP76O\u002fj4HLvSzxI7+vnOUa78+WZm\u002fMjOTv3tIbb+7wzS\u002fHBfEvg=="},"type":"scatter","xaxis":"x","yaxis":"y"},{"line":{"color":"crimson","dash":"dash","width":2},"mode":"lines","name":"Target","showlegend":false,"x":{"dtype":"f4","bdata":"AAAAAAAAgD8AAABAAQBAQAAAgEABAKBAAQDAQAAA4EAAAABBAQAQQQEAIEEAADBBAQBAQQEAUEEAAGBBAQBwQQAAgEEAAIhBAQCQQQAAmEEBAKBBAQCoQQAAsEEBALhBAQDAQQAAyEEBANBBAQDYQQAA4EEBAOhBAQDwQQAA+EEAAABCAQAEQgAACEIAAAxCAQAQQgAAFEIAABhCAQAcQgEAIEIAACRCAQAoQgEALEIAADBCAQA0QgEAOEIAADxCAQBAQgEAREIAAEhCAQBMQgEAUEIAAFRCAQBYQgEAXEIAAGBCAABkQgEAaEIBAGxCAQBwQgAAdEIAAHhCAAB8QgAAgEIBAIJCAQCEQgEAhkIAAIhCAACKQgAAjEIAAI5CAQCQQgEAkkIAAJRCAACWQgAAmEIAAJpCAQCcQgEAnkIBAKBCAACiQgAApEIAAKZCAQCoQgEAqkIBAKxCAACuQgAAsEIAALJCAQC0QgEAtkIBALhCAAC6QgAAvEIAAL5CAQDAQgEAwkIBAMRCAQDGQgAAyEIAAMpCAQDMQgEAzkIBANBCAQDSQgAA1EIAANZCAQDYQgEA2kIBANxCAQDeQgAA4EIAAOJCAADkQgIA5kIBAOhCAADqQgEA7EIAAO5CAQDwQgEA8kIAAPRCAQD2QgAA+EIBAPpCAAD8QgEA\u002fkIAAABDAAABQwEAAkMAAANDAQAEQwAABUMBAAZDAAAHQwAACEMBAAlDAAAKQwEAC0MAAAxDAAANQwAADkMAAA9DAQAQQwAAEUMBABJDAAATQwAAFEMBABVDAAAWQwEAF0MAABhDAQAZQwAAGkMAABtDAQAcQwAAHUMBAB5DAAAfQwEAIEMBACFDAAAiQwEAI0MAACRDAQAlQwAAJkMAACdDAQAoQwAAKUMBACpDAAArQwEALEMBAC1DAAAuQwEAL0MAADBDAQAxQwAAMkMBADNDAQA0QwAANUMBADZDAAA3QwEAOEMAADlDAAA6QwEAO0MAADxDAQA9QwAAPkMBAD9DAQBAQwAAQUMBAEJDAABDQwEAREMAAEVDAQBGQwEAR0MAAEhDAQBJQwAASkMBAEtDAQBMQwAATUMBAE5DAABPQwEAUEMAAFFDAQBSQwEAU0MAAFRDAQBVQwAAVkMBAFdDAQBYQwEAWUMBAFpDAABbQwEAXEMAAF1DAQBeQwEAX0MAAGBDAQBhQwAAYkMBAGNDAABkQwEAZUMCAGZDAQBnQwEAaEMAAGlDAABqQwEAa0MBAGxDAQBtQwAAbkMAAG9DAQBwQwEAcUMBAHJDAABzQwAAdEMBAHVDAQB2QwEAd0MAAHhDAgB5QwEAekMBAHtDAAB8QwAAfUMBAH5DAQB\u002fQwAAgEMAgIBDAACBQwGAgUMBAIJDAICCQwAAg0MAgINDAQCEQwCAhEMAAIVDAICFQwEAhkMBgIZDAACHQwCAh0MAAIhDAYCIQwEAiUMAgIlDAACKQwCAikMBAItDAYCLQwAAjEMAgIxDAACNQwGAjUMAAI5DAICOQwAAj0MBgI9DAQCQQwCAkEMAAJFDAICRQwEAkkMBgJJDAACTQwCAk0MAAJRDAYCUQwEAlUMAgJVDAACWQwCAlkMBAJdDAYCXQwAAmEMAgJhDAQCZQwGAmUMAAJpDAICaQwAAm0MBgJtDAQCcQwCAnEMAAJ1DAICdQwEAnkMBgJ5DAACfQwCAn0MBAKBDAYCgQwEAoUMAgKFDAACiQwGAokMBAKNDAICjQwAApEMAgKRDAQClQwGApUMAAKZDAICmQwAAp0MBgKdDAQCoQwCAqEMAAKlDAYCpQwEAqkMBgKpDAACrQwCAq0MBAKxDAYCsQwEArUMAgK1DAACuQwGArkMBAK9DAICvQwAAsEMAgLBDAQCxQwGAsUMAALJDAICyQwEAs0MBgLND"},"y":{"dtype":"f4","bdata":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAODYAALY3AACZOAAANTkAYLA5APgXOgCQcDoA6LI6AKz9OgAuLTsAUmU7AAeUOwAPuzsAGeg7ALoNPAC1KjyAHEs8gAxvPIBOizzA76A8wHG4PIDY0TwAJ+08gC4FPUC8FD0AOiU9gKQ2PQD3SD2AK1w9YDtwPUCPgj3gZY09oJyYPQAupD0gFLA9oEi8PdDEyD2ggdU9sHfiPWCf7z3A8Pw94DEFPhD4Cz64xhI+oJkZPohsID44Oyc+YAEuPuC6ND6QYzs+aPdBPnBySD7Y0E4+8A5VPjApWz44HGE+8ORmPlCAbD6g63E+aCR3PlgofD7AeoA+EMWCPmDyhD4YAoc+zPOIPizHij4UfIw+hBKOPqCKjz645JA+OCGSPrhAkz70Q5Q+zCuVPjj5lT5grZY+gEmXPvTOlz5AP5g+8JuYPrTmmD5QIZk+nE2ZPoBtmT74gpk+CJCZPsSWmT5AmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPpiZmT6YmZk+mJmZPkCZmT7Elpk+CJCZPviCmT6AbZk+nE2ZPlAhmT605pg+8JuYPkA\u002fmD70zpc+fEmXPlytlj40+ZU+yCuVPvBDlD60QJM+NCGSPrDkkD6cio8+gBKOPhB8jD4ox4o+xPOIPhAChz5Y8oQ+CMWCPrh6gD5IKHw+UCR3PpDrcT44gGw+2ORmPigcYT4gKVs+0A5VPsjQTj5gckg+WPdBPoBjOz7QujQ+UAEuPiA7Jz54bCA+kJkZPqDGEj749ws+yDEFPpDw\u002fD0gn+89kHfiPYCB1T2wxMg9gEi8PfATsD3gLaQ9gJyYPcBljT0gj4I9ADtwPWArXD3A9kg9QKQ2PeA5JT3guxQ9YC4FPcAm7TxA2NE8QHG4PIDvoDxATos8gAxvPAAcSzyAtCo8ALoNPAAZ6DsAD7s7AAeUOwBSZTsALi07AKz9OgDksjoAkHA6APgXOgBgsDkAADU5AACZOAAAtjcAADg2"},"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"steelblue","width":2},"mode":"lines","name":"Achieved","showlegend":false,"x":{"dtype":"f4","bdata":"AAAAAAAAgD8AAABAAQBAQAAAgEABAKBAAQDAQAAA4EAAAABBAQAQQQEAIEEAADBBAQBAQQEAUEEAAGBBAQBwQQAAgEEAAIhBAQCQQQAAmEEBAKBBAQCoQQAAsEEBALhBAQDAQQAAyEEBANBBAQDYQQAA4EEBAOhBAQDwQQAA+EEAAABCAQAEQgAACEIAAAxCAQAQQgAAFEIAABhCAQAcQgEAIEIAACRCAQAoQgEALEIAADBCAQA0QgEAOEIAADxCAQBAQgEAREIAAEhCAQBMQgEAUEIAAFRCAQBYQgEAXEIAAGBCAABkQgEAaEIBAGxCAQBwQgAAdEIAAHhCAAB8QgAAgEIBAIJCAQCEQgEAhkIAAIhCAACKQgAAjEIAAI5CAQCQQgEAkkIAAJRCAACWQgAAmEIAAJpCAQCcQgEAnkIBAKBCAACiQgAApEIAAKZCAQCoQgEAqkIBAKxCAACuQgAAsEIAALJCAQC0QgEAtkIBALhCAAC6QgAAvEIAAL5CAQDAQgEAwkIBAMRCAQDGQgAAyEIAAMpCAQDMQgEAzkIBANBCAQDSQgAA1EIAANZCAQDYQgEA2kIBANxCAQDeQgAA4EIAAOJCAADkQgIA5kIBAOhCAADqQgEA7EIAAO5CAQDwQgEA8kIAAPRCAQD2QgAA+EIBAPpCAAD8QgEA\u002fkIAAABDAAABQwEAAkMAAANDAQAEQwAABUMBAAZDAAAHQwAACEMBAAlDAAAKQwEAC0MAAAxDAAANQwAADkMAAA9DAQAQQwAAEUMBABJDAAATQwAAFEMBABVDAAAWQwEAF0MAABhDAQAZQwAAGkMAABtDAQAcQwAAHUMBAB5DAAAfQwEAIEMBACFDAAAiQwEAI0MAACRDAQAlQwAAJkMAACdDAQAoQwAAKUMBACpDAAArQwEALEMBAC1DAAAuQwEAL0MAADBDAQAxQwAAMkMBADNDAQA0QwAANUMBADZDAAA3QwEAOEMAADlDAAA6QwEAO0MAADxDAQA9QwAAPkMBAD9DAQBAQwAAQUMBAEJDAABDQwEAREMAAEVDAQBGQwEAR0MAAEhDAQBJQwAASkMBAEtDAQBMQwAATUMBAE5DAABPQwEAUEMAAFFDAQBSQwEAU0MAAFRDAQBVQwAAVkMBAFdDAQBYQwEAWUMBAFpDAABbQwEAXEMAAF1DAQBeQwEAX0MAAGBDAQBhQwAAYkMBAGNDAABkQwEAZUMCAGZDAQBnQwEAaEMAAGlDAABqQwEAa0MBAGxDAQBtQwAAbkMAAG9DAQBwQwEAcUMBAHJDAABzQwAAdEMBAHVDAQB2QwEAd0MAAHhDAgB5QwEAekMBAHtDAAB8QwAAfUMBAH5DAQB\u002fQwAAgEMAgIBDAACBQwGAgUMBAIJDAICCQwAAg0MAgINDAQCEQwCAhEMAAIVDAICFQwEAhkMBgIZDAACHQwCAh0MAAIhDAYCIQwEAiUMAgIlDAACKQwCAikMBAItDAYCLQwAAjEMAgIxDAACNQwGAjUMAAI5DAICOQwAAj0MBgI9DAQCQQwCAkEMAAJFDAICRQwEAkkMBgJJDAACTQwCAk0MAAJRDAYCUQwEAlUMAgJVDAACWQwCAlkMBAJdDAYCXQwAAmEMAgJhDAQCZQwGAmUMAAJpDAICaQwAAm0MBgJtDAQCcQwCAnEMAAJ1DAICdQwEAnkMBgJ5DAACfQwCAn0MBAKBDAYCgQwEAoUMAgKFDAACiQwGAokMBAKNDAICjQwAApEMAgKRDAQClQwGApUMAAKZDAICmQwAAp0MBgKdDAQCoQwCAqEMAAKlDAYCpQwEAqkMBgKpDAACrQwCAq0MBAKxDAYCsQwEArUMAgK1DAACuQwGArkMBAK9DAICvQwAAsEMAgLBDAQCxQwGAsUMAALJDAICyQwEAs0MBgLND"},"y":{"dtype":"f4","bdata":"AJCJuQDAorkASLW5AKDBuQBgyLkA6Mm5AMDGuQBwv7kASLS5APCluQDolLkAeIG5AMBYuQDAK7kAIPq4AMCbuACA9rcAAHA3AIBpOADAxTgA4AY5ACAmOQBAPzkAAFE5AOBbOQBgYDkAAF45AOBWOQBgSjkAIDo5AOAlOQDgDjkAQOs4AMCzOACAdTgAAAI4AAAoNgCAz7cAQFW4AECfuADAzbgAAPi4ALAMuQBwGbkAECK5AKAkuQAgIrkA0Bm5AKAMuQBg97gAAM64AICeuADAVrgAgM63AABANgAAATgAgHY4AIC0OABA6zgAIA85AGAmOQBgOjkAwEo5AOBWOQBAXjkAIGA5AABcOQAgUTkAID85AEAmOQAgBzkAwMU4AIBqOAAAcDcAgPa3AKCbuABA+rgAwCu5ALBYuQCIgbkA6JS5AAimuQBYtLkAcL+5ANjGuQAAyrkAcMi5ALjBuQBYtbkA2KK5ALCJuQDwULkAwOe4AACENwBASDkAEOA5ABhBOgAwlDoAgNQ6AIgROwCwQDsAhng7AOacOwCnwjsA5+07AIYPPAA8KzyAR0o8ANpsPACTiTyArp48QNi1PEApzzyAueo84EMEPeA9FD1gPSU9YDU3PcAYSj2g2l09wG1yPYDigz2g6Y494EWaPYDwpT0w47E9MBe+PRCGyj1AKdc9MPrjPXDy8D1QC\u002f49OJ8FPpBCDD547BI+mJkZPsBGID6g8CY++JMtPoAtND74uTo+EDZBPpCeRz4g8E0+mCdUPphBWj7oOmA+OBBmPlC+az7wQXE+wJd2Poi8ez58VoA+6LKCPujxhD7YEYc+GBGJPgDuij4Ap4w+DDyOPqyujz5gAJE+wDKSPlRHkz60P5Q+YB2VPvThlT7wjpY+9CWXPoColz4sGJg+gHaYPgzFmD5YBZk+\u002fDiZPohhmT6EgJk+fJeZPgComT6os5k++LuZPkDCmT7gxpk++MmZPqjLmT4MzJk+RMuZPmjJmT6oxpk+EMOZPsi+mT7suZk+qLSZPgivmT40qZk+TKOZPmydmT60l5k+QJKZPjiNmT60iJk+0ISZPqyBmT5wf5k+FH6ZPpB9mT7MfZk+uH6ZPjyAmT5Igpk+zISZPrCHmT7gipk+TI6ZPuCRmT6MlZk+OJmZPtScmT5EoJk+gKOZPnimmT4IqZk+LKuZPsismT7QrZk+LK6ZPtCtmT7IrJk+KKuZPgSpmT50ppk+gKOZPkSgmT7QnJk+NJmZPoyVmT7ckZk+SI6ZPuCKmT60h5k+zISZPkiCmT48gJk+tH6ZPsx9mT6MfZk+GH6ZPmx\u002fmT6sgZk+zISZPrCImT44jZk+RJKZPrSXmT5wnZk+UKOZPjypmT4Mr5k+rLSZPvi5mT7Qvpk+GMOZPqzGmT50yZk+SMuZPhjMmT6wy5k+CMqZPuzGmT5Qwpk+BLyZPrSzmT4QqJk+hJeZPpCAmT6QYZk+CDmZPmQFmT4UxZg+iHaYPjgYmD6IqJc+\u002fCWXPvyOlj784ZU+aB2VPrw\u002flD5cR5M+wDKSPmAAkT6sro8+FDyOPgCnjD787Yo+HBGJPtgRhz7w8YQ+6LKCPnxWgD6AvHs+uJd2PvBBcT5Yvms+QBBmPtg6YD6YQVo+iCdUPhjwTT6Inkc+CDZBPvi5Oj54LTQ+8JMtPqDwJj7ARiA+mJkZPmjsEj6AQgw+KJ8FPlAL\u002fj1g8vA9IPrjPUAp1z0Qhso9MBe+PTDjsT2Q8KU94EWaPaDpjj2A4oM9wG1yPaDaXT3gGEo9gDU3PWA9JT3APRQ9AEQEPYC56jzAKc88gNi1PMCunjyAk4k8ANtsPABISjwAPSs8AIcPPADq7TsAqMI7AOicOwCKeDsAtkA7AIoROwCM1DoAPJQ6ACBBOgAw4DkAgEg5AACGNwAg57gAoFC5"},"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,0.44],"scaleanchor":"y","scaleratio":1,"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"y"}},"xaxis2":{"anchor":"y2","domain":[0.56,1.0],"title":{"text":"Cam angle (\u00b0)"},"range":[0,360],"dtick":90},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"title":{"text":"Displacement"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Cam Profile","x":0.22,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Follower Displacement","x":0.78,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"shapes":[{"fillcolor":"rgba(200,200,200,0.2)","line":{"width":0},"type":"rect","x0":0,"x1":90,"xref":"x2","y0":0,"y1":1,"yref":"y2 domain"},{"fillcolor":"rgba(100,149,237,0.2)","line":{"width":0},"type":"rect","x0":90,"x1":180,"xref":"x2","y0":0,"y1":1,"yref":"y2 domain"},{"fillcolor":"rgba(200,200,200,0.2)","line":{"width":0},"type":"rect","x0":180,"x1":270,"xref":"x2","y0":0,"y1":1,"yref":"y2 domain"},{"fillcolor":"rgba(100,149,237,0.2)","line":{"width":0},"type":"rect","x0":270,"x1":360,"xref":"x2","y0":0,"y1":1,"yref":"y2 domain"}],"margin":{"t":40,"b":40,"l":60,"r":40},"legend":{"x":0.02,"y":0.98},"height":400},                        {"responsive": true}                    )                };            </script>        </div></div></div>
</div>
</section>
<section id="pressure-angle-analysis">
<h2>Pressure angle analysis<a class="headerlink" href="#pressure-angle-analysis" title="Link to this heading">#</a></h2>
<p>The pressure angle affects force transmission efficiency. High angles cause side loads on the follower.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">eval_thetas</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">pressure_angles</span><span class="p">),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;steelblue&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Pressure angle&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Limit line.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_hline</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">MAX_PRESSURE_ANGLE</span><span class="p">)),</span>
    <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;crimson&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dash</span><span class="o">=</span><span class="s2">&quot;dash&quot;</span><span class="p">),</span>
    <span class="n">annotation_text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Limit (</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">jnp</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">MAX_PRESSURE_ANGLE</span><span class="p">))</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">°)&quot;</span><span class="p">,</span>
    <span class="n">annotation_position</span><span class="o">=</span><span class="s2">&quot;top right&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Shade motion phases.</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_vrect</span><span class="p">(</span><span class="n">x0</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;rgba(100,149,237,0.15)&quot;</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_vrect</span><span class="p">(</span><span class="n">x0</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;rgba(100,149,237,0.15)&quot;</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">135</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Rise&quot;</span><span class="p">,</span> <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">315</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return&quot;</span><span class="p">,</span> <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cam angle (°)&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">],</span> <span class="n">dtick</span><span class="o">=</span><span class="mi">90</span><span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Pressure angle (°)&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">]),</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">full_html</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">include_plotlyjs</span><span class="o">=</span><span class="s2">&quot;cdn&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="9420fea9-952f-4979-ba46-9c096edc68ef" class="plotly-graph-div" style="height:300px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("9420fea9-952f-4979-ba46-9c096edc68ef")) {                    Plotly.newPlot(                        "9420fea9-952f-4979-ba46-9c096edc68ef",                        [{"line":{"color":"steelblue","width":2},"mode":"lines","name":"Pressure angle","x":{"dtype":"f4","bdata":"AAAAAAAAgD8AAABAAQBAQAAAgEABAKBAAQDAQAAA4EAAAABBAQAQQQEAIEEAADBBAQBAQQEAUEEAAGBBAQBwQQAAgEEAAIhBAQCQQQAAmEEBAKBBAQCoQQAAsEEBALhBAQDAQQAAyEEBANBBAQDYQQAA4EEBAOhBAQDwQQAA+EEAAABCAQAEQgAACEIAAAxCAQAQQgAAFEIAABhCAQAcQgEAIEIAACRCAQAoQgEALEIAADBCAQA0QgEAOEIAADxCAQBAQgEAREIAAEhCAQBMQgEAUEIAAFRCAQBYQgEAXEIAAGBCAABkQgEAaEIBAGxCAQBwQgAAdEIAAHhCAAB8QgAAgEIBAIJCAQCEQgEAhkIAAIhCAACKQgAAjEIAAI5CAQCQQgEAkkIAAJRCAACWQgAAmEIAAJpCAQCcQgEAnkIBAKBCAACiQgAApEIAAKZCAQCoQgEAqkIBAKxCAACuQgAAsEIAALJCAQC0QgEAtkIBALhCAAC6QgAAvEIAAL5CAQDAQgEAwkIBAMRCAQDGQgAAyEIAAMpCAQDMQgEAzkIBANBCAQDSQgAA1EIAANZCAQDYQgEA2kIBANxCAQDeQgAA4EIAAOJCAADkQgIA5kIBAOhCAADqQgEA7EIAAO5CAQDwQgEA8kIAAPRCAQD2QgAA+EIBAPpCAAD8QgEA\u002fkIAAABDAAABQwEAAkMAAANDAQAEQwAABUMBAAZDAAAHQwAACEMBAAlDAAAKQwEAC0MAAAxDAAANQwAADkMAAA9DAQAQQwAAEUMBABJDAAATQwAAFEMBABVDAAAWQwEAF0MAABhDAQAZQwAAGkMAABtDAQAcQwAAHUMBAB5DAAAfQwEAIEMBACFDAAAiQwEAI0MAACRDAQAlQwAAJkMAACdDAQAoQwAAKUMBACpDAAArQwEALEMBAC1DAAAuQwEAL0MAADBDAQAxQwAAMkMBADNDAQA0QwAANUMBADZDAAA3QwEAOEMAADlDAAA6QwEAO0MAADxDAQA9QwAAPkMBAD9DAQBAQwAAQUMBAEJDAABDQwEAREMAAEVDAQBGQwEAR0MAAEhDAQBJQwAASkMBAEtDAQBMQwAATUMBAE5DAABPQwEAUEMAAFFDAQBSQwEAU0MAAFRDAQBVQwAAVkMBAFdDAQBYQwEAWUMBAFpDAABbQwEAXEMAAF1DAQBeQwEAX0MAAGBDAQBhQwAAYkMBAGNDAABkQwEAZUMCAGZDAQBnQwEAaEMAAGlDAABqQwEAa0MBAGxDAQBtQwAAbkMAAG9DAQBwQwEAcUMBAHJDAABzQwAAdEMBAHVDAQB2QwEAd0MAAHhDAgB5QwEAekMBAHtDAAB8QwAAfUMBAH5DAQB\u002fQwAAgEMAgIBDAACBQwGAgUMBAIJDAICCQwAAg0MAgINDAQCEQwCAhEMAAIVDAICFQwEAhkMBgIZDAACHQwCAh0MAAIhDAYCIQwEAiUMAgIlDAACKQwCAikMBAItDAYCLQwAAjEMAgIxDAACNQwGAjUMAAI5DAICOQwAAj0MBgI9DAQCQQwCAkEMAAJFDAICRQwEAkkMBgJJDAACTQwCAk0MAAJRDAYCUQwEAlUMAgJVDAACWQwCAlkMBAJdDAYCXQwAAmEMAgJhDAQCZQwGAmUMAAJpDAICaQwAAm0MBgJtDAQCcQwCAnEMAAJ1DAICdQwEAnkMBgJ5DAACfQwCAn0MBAKBDAYCgQwEAoUMAgKFDAACiQwGAokMBAKNDAICjQwAApEMAgKRDAQClQwGApUMAAKZDAICmQwAAp0MBgKdDAQCoQwCAqEMAAKlDAYCpQwEAqkMBgKpDAACrQwCAq0MBAKxDAYCsQwEArUMAgK1DAACuQwGArkMBAK9DAICvQwAAsEMAgLBDAQCxQwGAsUMAALJDAICyQwEAs0MBgLND"},"y":{"dtype":"f4","bdata":"BaM3PuWTCz4TQMU9cg1zPawF0DxBIbU7g\u002fcIPSG0bj1pFqQ9uaTKPUTc6j1UfwI++2QMPvFFEz4eDBc+jaYXPpMzFT7trw8+avQGPqB\u002f9j21m9g9wcy0PZnHij1LMjc9AQm9PHnRVjt\u002f4nE8UVv8PEefOD0zF2s9AAaLPciVnD0+Vqo9WEe0Pddfuj2hn7w9pwa7PUuZtT1wZ6w9lDyfPSVWjj1533I97shBPXv0CD3MJJA8BY6RN89BkTwiEgk9NctBPVRIcz22Wo49KzGfPZJwrD1oorU9hP26PcGovD3VX7o9AlW0PVxfqj0CqJw93vyKPUogaz0kljg9BpL8PK0HcTxi1FI7h+S8PDl7Nz2bx4o90uW0PR\u002fQ2D2\u002fiPY9xwcHPu2vDz5BQRU+N7gXPhkUFz6dVxM+xX8MPm+QAj5U\u002feo9\u002fLLKPVwupD2N+G49ayMJPTAAtzvkpc88juJyPbUoxT2Shws+6Zk3PmQpeT73TrE+XvX5PuBDKz9ne2M\u002ffs6SP7LOuD+mueM\u002fM8MJQJcVJEDnzUBA1uRfQKKogEA6hJJATH+lQMiSuUCgts5AsuHkQDUK\u002fECGEgpBwZIWQXl\u002fI0EtqzBBESw9QavdSEHAwlNBuN5dQRw1Z0H8yW9Br6F3QWPAfkFllYJBnnKFQR76h0EtLopB4RCMQXakjUHf6o5BE+aPQQ2YkEGNApFBPyeRQcQHkUGfpZBBPQKQQeEej0HA\u002fI1B+ZyMQYgAi0FVKIlBMxWHQc\u002fHhEHOQIJBZQF\u002fQeAPeUGirXJBXttrQTyZZEGL51xBWMZUQWs1TEGONENBV8M5QSnhL0FrjSVBOccaQe2ND0F+\u002fwNBp6\u002fxQIRq3ED7LchAIvi0QD7HokCMmZFAdG2BQF2CZED7JkhA28UtQJRcFUCx0P0\u002fJc\u002fUP2mxrz\u002f5c44\u002fjSZiP8UcLz9kxgM\u002f9EXAPpBZiD64kT8+lCoNPsCT1j0lmJc9EcA6PdDHnzyu64s7EIrSPMeZNz1YTnw9lL6bPaKdtD3escg9MPvXPQ2A4j1iQ+g9TVHpPYeI5T0O9tw90KPPPUWdvT0Kv6Y9eiOLPUFwVT1oFA09HU2RPO08Ijt0+Dk8AGLCPD\u002f4DT3U6DQ9qNhVPdj4cD1yEYM9M7SKPaBljz0hHJE9fN2PPTe4iz3SjIQ9PPp0PWfRWj3D8Do9XQ0VPYSB0jxOkV48MnBgN1V3Xjy7odI8NBkVPeX2Oj127Vo94QN1PQiWhD22tIs9seaPPQEdkT2CZo89VLOKPdQVgz3y8HA9qNhVPT3bND3\u002f+Q09dTDCPGCcOTzxICM7TleRPOo5DT3\u002fj1U9tDKLPbzNpj3nr709v8DPPWMO3T32mOU9pGDpPU5g6D0omOI92RLYPYPCyD1IrrQ9b9ibPSdzfD2Rtzc9l+LSPI3BjDtFb588trA6PZCHlz12itY90CgNPsOWPz5qWog+JEfAPsTIAz8oHy8\u002fHSliP1h0jj9jsq8\u002fx9DUP7HR\u002fT8zXRVAdMYtQOonSEA3g2RAzG2BQAKakUDCx6JAqfi0QEkuyEDUatxA5q\u002fxQL7\u002fA0ERjg9Be8caQZ6NJUFO4S9BfsM5QbU0Q0GJNUxBaMZUQbDnXEFgmWRBbdtrQc6tckHvD3lBdAF\u002fQdlAgkHQx4RBOhWHQV4oiUGLAItB9pyMQcD8jUHaHo9BOQKQQZ6lkEHGB5FBOCeRQYICkUEBmJBBDeaPQc7qjkFppI1B2hCMQR4uikEW+odBj3KFQVeVgkFKwH5BcqF3QeHJb0HuNGdBjN5dQZ3CU0Fy3UhB2Ss9Qf6qMEFbfyNBi5IWQUMSCkHoCfxAcOHkQGq2zkCFkrlAIX+lQBmEkkB0qIBAoeRfQKXNQEBQFSRA78IJQMS54z\u002fSzrg\u002fnc6SP+d7Yz8eRCs\u002f3\u002fj5PiFQsT6VM3k+"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"shapes":[{"line":{"color":"crimson","dash":"dash","width":2},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":30.000001907348633,"y1":30.000001907348633,"yref":"y"},{"fillcolor":"rgba(100,149,237,0.15)","line":{"width":0},"type":"rect","x0":90,"x1":180,"xref":"x","y0":0,"y1":1,"yref":"y domain"},{"fillcolor":"rgba(100,149,237,0.15)","line":{"width":0},"type":"rect","x0":270,"x1":360,"xref":"x","y0":0,"y1":1,"yref":"y domain"}],"annotations":[{"showarrow":false,"text":"Limit (30\u00b0)","x":1,"xanchor":"right","xref":"x domain","y":30.000001907348633,"yanchor":"bottom","yref":"y"},{"font":{"size":12},"showarrow":false,"text":"Rise","x":135,"y":25},{"font":{"size":12},"showarrow":false,"text":"Return","x":315,"y":25}],"xaxis":{"title":{"text":"Cam angle (\u00b0)"},"range":[0,360],"dtick":90},"yaxis":{"title":{"text":"Pressure angle (\u00b0)"},"range":[0,40]},"margin":{"t":30,"b":40,"l":60,"r":40},"height":300,"showlegend":false},                        {"responsive": true}                    )                };            </script>        </div></div></div>
</div>
<p>The optimized cam profile closely tracks the desired dwell-rise-dwell-return motion while keeping the pressure angle within acceptable limits. The B-spline parameterization ensures a smooth, manufacturable profile.</p>
<p>Key design tradeoffs:</p>
<ul class="simple">
<li><p><strong>Larger base circle</strong> → lower pressure angles but larger cam size</p></li>
<li><p><strong>Slower rise/return</strong> → lower pressure angles but reduced machine speed</p></li>
<li><p><strong>More control points</strong> → better motion tracking but more complex profile</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../cart_pole_shooting/"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Cart-pole (shooting)</p>
      </div>
    </a>
    <a class="right-next"
       href="../imu_sensor_fusion/"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">IMU fusion + calibration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cam-geometry">Cam geometry</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#target-motion-profile">Target motion profile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-variables-and-costs">Optimization variables and costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solve-the-cam-design-problem">Solve the cam design problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pressure-angle-analysis">Pressure angle analysis</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By brentyi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2026.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>